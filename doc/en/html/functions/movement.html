<!DOCTYPE html>
<html lang="en">
<head>
    <title>Movement</title>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
    <meta charset="windows-1251">
    <meta name="author" content="Gecko">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="../sakura.css" inline>
    <link rel="stylesheet" type="text/css" href="../github.css" inline>
</head>
<body>
<h1 id="movement">Movement</h1>
<p>Объект Movement (движение) позволяет задавать объектам траектории движения. Траектории называются путями (Path). Путь может представлять собой набор отрезков, либо сплайн (кривую) - кубический, сплайн Безье или NURBS. Собственное движение объекта и движение по пути взаимоисключающи - то есть, пока объект движется по пути, его нельзя двигать обычными функциями ObjectMove и др. Объект Movement включает один или несколько путей, и вы можете переключаться между ними. Также возможен последовательный проход всех путей друг за другом.</p>
<hr />
<h2 id="movementcreate">MovementCreate</h2>
<p><code>real MovementCreate(real object);</code></p>
<p>Создает объект Movement, который будет управлять движением заданного объекта, и возвращает его id.</p>
<ul>
<li><code>object</code> - указатель на подконтрольный объект.</li>
</ul>
<hr />
<h2 id="movementaddpath">MovementAddPath</h2>
<p><code>real MovementAddPath(real movement);</code></p>
<p>Добавляет объекту Movement новый путь и возвращает указатель на него (не индекс!).</p>
<ul>
<li><code>movement</code> - указатель на объект Movement.</li>
</ul>
<hr />
<h2 id="movementsetactivepath">MovementSetActivePath</h2>
<p><code>real MovementSetActivePath(real movement, real index);</code></p>
<p>Задает текущий (активный) путь объекта Movement. Функция <code>MovementStart</code> всегда начинает движение с первого узла этого пути.</p>
<ul>
<li><code>movement</code> - указатель на объект Movement</li>
<li><code>index</code> - индекс пути, начиная с 0. Значение по умолчанию - 0.</li>
</ul>
<hr />
<h2 id="movementstart">MovementStart</h2>
<p>`real MovementStart(real movement)</p>
<p>Запускает движение подконтрольного объекта. Позиция и поворот объекта при этом всегда сбрасываются на начальный узел текущего пути.</p>
<ul>
<li><code>movement</code> - указатель на объект Movement.</li>
</ul>
<hr />
<h2 id="movementstop">MovementStop</h2>
<p><code>real MovementStop(real movement);</code></p>
<p>Останавливает движение. После остановки подконтрольный объект можно двигать обычными функциями.</p>
<ul>
<li><code>movement</code> - указатель на объект Movement.</li>
</ul>
<hr />
<h2 id="movementautostartnextpath">MovementAutoStartNextPath</h2>
<p><code>real MovementAutoStartNextPath(real movement, real mode);</code></p>
<p>Определяет, переключаться ли автоматически на следующий путь, когда завершается текущий.</p>
<ul>
<li><code>movement</code> - указатель на объект Movement</li>
<li><code>mode</code> - <code>true</code> или <code>false</code> (1 и 0 соответственно). По умолчанию опция включена.</li>
</ul>
<hr />
<h2 id="movementpathsetsplinemode">MovementPathSetSplineMode</h2>
<p><code>real MovementPathSetSplineMode(real path, real lsm);</code></p>
<p>Задает тип сплайна пути. Подробнее о типах сплайнов вы можете прочитать в разделе <a href="lines.html">Lines</a>.</p>
<ul>
<li><code>path</code> - указатель на путь</li>
<li><code>lsm</code> - тип сплайна. Доступны следующие значения <code>lsm</code>:<ul>
<li><code>lsmLines</code> = 0 - набор отрезков</li>
<li><code>lsmCubicSpline</code> = 1 - кубический сплайн (значение по умолчанию)</li>
<li><code>lsmBezierSpline</code> = 2 - сплайн Безье</li>
<li><code>lsmNURBSCurve</code> = 3 - NURBS.</li></ul></li>
</ul>
<hr />
<h2 id="movementpathaddnode">MovementPathAddNode</h2>
<p><code>real MovementPathAddNode(real path);</code></p>
<p>Добавляет в путь новый узел и возвращает его id. Узел - это контрольная точка, определяющая направление пути. Кроме позиции, узел определяет также и поворот - таким образом, объект во время перемещения может плавно вращаться от одного угла к другому. Кроме того, узел определяет скорость движения объекта вдоль отрезка пути.</p>
<ul>
<li><code>path</code> - указатель на путь.</li>
</ul>
<hr />
<h2 id="movementpathdeletenode">MovementPathDeleteNode</h2>
<p><code>real MovementPathDeleteNode(real path, real node);</code></p>
<p>Удаляет узел из пути.</p>
<ul>
<li><code>path</code> - указатель на путь</li>
<li><code>node</code> - указатель на узел.</li>
</ul>
<hr />
<h2 id="movementpathnodesetposition">MovementPathNodeSetPosition</h2>
<p><code>real MovementPathNodeSetPosition(real node, real x, real y, real z);</code></p>
<p>Задает позицию узла.</p>
<ul>
<li><code>node</code> - указатель на узел</li>
<li><code>x</code>, <code>y</code>, <code>z</code> - позиция.</li>
</ul>
<hr />
<h2 id="movementpathnodesetrotation">MovementPathNodeSetRotation</h2>
<p><code>real MovementPathNodeSetRotation(real node, real pitch, real turn, real roll);</code></p>
<p>Задает поворот узла.</p>
<ul>
<li><code>node</code> - указатель на узел</li>
<li><code>pitch</code>, <code>turn</code>, <code>roll</code> - углы поворота в градусах по трем осям.</li>
</ul>
<hr />
<h2 id="movementpathnodesetspeed">MovementPathNodeSetSpeed</h2>
<p><code>real MovementPathNodeSetSpeed(real node, real speed);</code></p>
<p>Задает скорость узла.</p>
<ul>
<li><code>node</code> - указатель на узел</li>
<li><code>speed</code> - скорость.</li>
</ul>
<hr />
<h2 id="movementpathshow">MovementPathShow</h2>
<p><code>real MovementPathShow(real path, real show);</code></p>
<p>Переключает отображение пути в виде линий.</p>
<ul>
<li><code>path</code> - указатель на узел</li>
<li><code>show</code> - видимость (<code>true</code> или <code>false</code>).</li>
</ul>
<hr />
<h2 id="movementpathsetloop">MovementPathSetLoop</h2>
<p><code>real MovementPathSetLoop(real path, real loop);</code></p>
<p>Переключает зацикленность пути.</p>
<ul>
<li><code>path</code> - указатель на узел</li>
<li><code>loop</code> - <code>true</code> или <code>false</code>.</li>
</ul>
</body>
</html>

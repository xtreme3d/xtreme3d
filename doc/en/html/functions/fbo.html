<!DOCTYPE html>
<html lang="en">
<head>
    <title>FBO</title>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
    <meta charset="windows-1251">
    <meta name="author" content="Gecko">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="../sakura.css" inline>
    <link rel="stylesheet" type="text/css" href="../github.css" inline>
</head>
<body>
<h1 id="fbo">FBO</h1>
<p>FBO (Frame Buffer Object) - это современный механизм внеэкранного рендеринга, пришедший на смену p-буферам (см. <a href="memviewer.html">MemoryViewer</a>). Как и MemoryViewer, FBO позволяет рендерить сцену в отдельный буфер в видеопамяти, содержимое которого затем становится доступным в качестве текстуры. Это позволяет производить над полученным изображением различные шейдерные операции постобработки, применять фильтры и спецэффекты.</p>
<p>В отличие от MemoryViewer, FBO не требует относительно дорогостоящей операции переключения контекстов OpenGL, поэтому на современных системах предпочтительнее использовать именно его. Также FBO работает намного быстрее, чем <code>ViewerCopyToTexture</code>, которая, фактически, совершает копирование данных из одного буфера в другой. Еще одно преимущество - FBO предоставляет полноценный доступ к буферу глубины, что необходимо для реализации некоторых фильтров. При этом пользоваться FBO ничуть не сложнее, чем MemoryViewer. Единственное ограничение состоит в том, что доступ к текстурам FBO возможен только через шейдеры GLSL - то есть, нельзя создать материал, который бы использовал FBO-текстуру без шейдера.</p>
<p>Чтобы передать текстуры FBO в GLSL-шейдер, используйте функции <code>GLSLShaderSetParameterFBOColorTexture</code> и <code>GLSLShaderSetParameterFBODepthTexture</code> - соответственно, для цветового буфера и буфера глубины.</p>
<p>Функции FBO требуют поддержки OpenGL 1.4 и расширения <code>GL_ARB_framebuffer_object</code>.</p>
<hr />
<h2 id="fbocreate">FBOCreate</h2>
<p><code>real FBOCreate(real width, real height, real parent);</code></p>
<p>Создает новый FBO и возвращает указатель на него.</p>
<ul>
<li><code>width</code>, <code>height</code> - ширина и высота буфера</li>
<li><code>parent</code> - указатель на родителя.</li>
</ul>
<hr />
<h2 id="fbosetactive">FBOSetActive</h2>
<p><code>real FBOSetActive(real fbo, real mode);</code></p>
<p>Переключает активность FBO.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>mode</code> - <code>true</code> или <code>false</code>.</li>
</ul>
<hr />
<h2 id="fbosetaspect">FBOSetAspect</h2>
<p><code>real FBOSetAspect(real fbo, real aspect);</code></p>
<p>Задает соотношение сторон FBO (ширина, деленная на высоту).</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>aspect</code> - соотношение сторон.</li>
</ul>
<hr />
<h2 id="fbosetpickabletarget">FBOSetPickableTarget</h2>
<p><code>real FBOSetPickableTarget(real fbo, real mode);</code></p>
<p>Сведения отсутствуют.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>mode</code> - <code>true</code> или <code>false</code>.</li>
</ul>
<hr />
<h2 id="fbosetsize">FBOSetSize</h2>
<p><code>real FBOSetSize(real fbo, real width, real height);</code></p>
<p>Задает размер FBO.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>width</code>, <code>height</code> - ширина и высота в пикселях.</li>
</ul>
<hr />
<h2 id="fbosetcamera">FBOSetCamera</h2>
<p><code>real FBOSetCamera(real fbo, real camera);</code></p>
<p>Задает камеру, через которую FBO должен рендерить сцену.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>camera</code> - указатель на камеру.</li>
</ul>
<hr />
<h2 id="fbosetrootobject">FBOSetRootObject</h2>
<p><code>real FBOSetRootObject(real fbo, real obj);</code></p>
<p>Задает корневой объект для рендеринга. FBO будет рисовать этот объект и, рекурсивно, всех его потомков.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>obj</code> - указатель на объект.</li>
</ul>
<hr />
<h2 id="fbosetbackgroundcolor">FBOSetBackgroundColor</h2>
<p><code>real FBOSetBackgroundColor(real fbo, real color);</code></p>
<p>Задает фоновой цвет FBO (цвет очистки кадрового буфера).</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>color</code> - цвет.</li>
</ul>
<hr />
<h2 id="fbosetenabledrenderbuffers">FBOSetEnabledRenderBuffers</h2>
<p><code>real FBOSetEnabledRenderBuffers(real fbo, real depth, real stencil);</code></p>
<p>Включает или выключает дополнительные буферы для FBO - буфер глубины и стенсильный буфер.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>depth</code> - <code>true</code> или <code>false</code></li>
<li><code>stencil</code> - <code>true</code> или <code>false</code>.</li>
</ul>
<hr />
<h2 id="fbosetscenescalefactor">FBOSetSceneScaleFactor</h2>
<p><code>real FBOSetSceneScaleFactor(real fbo, real scale);</code></p>
<p>Задает масштаб сцены при рендеринге в FBO.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>scale</code> - масштаб.</li>
</ul>
<hr />
<h2 id="fbosettargetvisibility">FBOSetTargetVisibility</h2>
<p><code>real FBOSetTargetVisibility(real fbo, real tv);</code></p>
<p>Задает режим видимости объектов, которые рендерятся в FBO.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>tv</code> - режим видимости. Поддерживаются следующие значения <code>tv</code>:<ul>
<li><code>tvDefault</code> = 0 - режим по умолчанию: видимость объектов не меняется;</li>
<li><code>tvFBOOnly</code> = 1 - объекты рендерятся только в FBO и не рендерятся обычным образом.</li></ul></li>
</ul>
<hr />
<h2 id="fbosetmateriallibrary">FBOSetMaterialLibrary</h2>
<p><code>real FBOSetMaterialLibrary(real fbo, real matlib);</code></p>
<p>Задает библиотеку материалов, в которой хранятся текстуры для FBO.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>matlib</code> - указатель на библиотеку материалов.</li>
</ul>
<hr />
<h2 id="fbosetcolortexturename">FBOSetColorTextureName</h2>
<p><code>real FBOSetColorTextureName(real fbo, string name);</code></p>
<p>Задает имя материала, текстуру которого FBO должен использовать в качестве буфера кадра. Материал должен существовать в заданной библиотеке материалов, текстура должна быть создана функцией <code>MaterialGenTexture</code>.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>name</code> - имя материала.</li>
</ul>
<hr />
<h2 id="fbosetdepthtexturename">FBOSetDepthTextureName</h2>
<p><code>real FBOSetDepthTextureName(real fbo, string name);</code></p>
<p>Задает имя материала, текстуру которого FBO должен использовать в качестве буфера глубины. Материал должен существовать в заданной библиотеке материалов, текстура должна быть создана функцией <code>MaterialGenTexture</code>.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>name</code> - имя материала.</li>
</ul>
<hr />
<h2 id="fbosetclearoptions">FBOSetClearOptions</h2>
<p><code>real FBOSetClearOptions(real fbo, real clearColor, real clearDepth, real clearStencil, real useBufferBackground);</code></p>
<p>Задает опции очистки FBO.</p>
<ul>
<li><code>clearColor</code> - очищать ли буфер кадра, <code>true</code> или <code>false</code></li>
<li><code>clearDepth</code> - очищать ли буфер глубины, <code>true</code> или <code>false</code></li>
<li><code>clearStencil</code> - очищать ли стенсильный буфер, <code>true</code> или <code>false</code></li>
<li><code>useBufferBackground</code> - использовать ли для очистки фоновой цвет FBO, <code>true</code> или <code>false</code>.</li>
</ul>
<hr />
<h2 id="fbosetstencilprecision">FBOSetStencilPrecision</h2>
<p><code>real FBOSetStencilPrecision(real fbo, real sp);</code></p>
<p>Задает точность стенсильного буфера.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>sp</code> - точность стенсильного буфера. Поддерживаются следующие значения <code>sp</code>:<ul>
<li><code>spDefault</code> = 0</li>
<li><code>sp1bit</code> = 1</li>
<li><code>sp4bits</code> = 2</li>
<li><code>sp8bits</code> = 3</li>
<li><code>sp16bits</code> = 4</li></ul></li>
</ul>
<hr />
<h2 id="fbosetshadowmapmode">FBOSetShadowMapMode</h2>
<p><code>real FBOSetShadowMapMode(real fbo, real mode);</code></p>
<p>Переключает режим рендеринга теней. В режиме рендеринга теней используется смещение полигонов, отключается отбор видимости и игнорируются материалы объектов.</p>
<ul>
<li><code>fbo</code> - указатель на FBO</li>
<li><code>mode</code> - <code>true</code> или <code>false</code></li>
</ul>
</body>
</html>

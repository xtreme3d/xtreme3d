<!DOCTYPE html>
<html lang="en">
<head>
    <title>Actor</title>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
    <meta charset="windows-1251">
    <meta name="author" content="Gecko">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="../sakura.css" inline>
    <link rel="stylesheet" type="text/css" href="../github.css" inline>
</head>
<body>
<h1 id="actor">Actor</h1>
<p>Актер (Actor) - анимированный объект, загружаемый из внешнего файла. Поддерживаются форматы MD2 (Quake 2), MD3 (Quake 3), MD5 (Doom 3), SMD (Half-Life), MDC (Return To Castle Wolfenstein).</p>
<p>Есть два типа анимации - вертексная и скелетная. В случае вертексной анимации, в памяти хранятся отдельные модели для каждого ключевого кадра. Вершины полигональной сетки просто интерполируются от одного положения к другому.</p>
<p>Скелетная анимация подразумевает наличие только одной модели в нейтральной позе и набора матриц, которые трансформируют отдельные части этой модели. Эти матрицы условно называют костями. Иными словами, в модель встроен "скелет" из этих костей - при повороте отдельной кости, поворачивается и соответствующая часть тела.</p>
<hr />
<h2 id="actorcreate">ActorCreate</h2>
<p><code>real ActorCreate(string filename, real matlib, real parent);</code></p>
<p>Создает нового актера и возвращает указатель на него.</p>
<ul>
<li><code>filename</code> - путь к файлу модели</li>
<li><code>matlib</code> - библиотека материалов, которую следует использовать для хранения материалов модели</li>
<li><code>parent</code> - указатель на родителя для актера (0 - отсутствие родителя).</li>
</ul>
<hr />
<h2 id="actorcopy">ActorCopy</h2>
<p><code>real ActorCopy(real actor, real parent);</code></p>
<p>Создает копию уже существующего актера и возвращает указатель на него.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>parent</code> - указатель на родителя для копии (0 - отсутствие родителя).</li>
</ul>
<hr />
<h2 id="actorsetanimationrange">ActorSetAnimationRange</h2>
<p><code>real ActorSetAnimationRange(real actor, real start, real end);</code></p>
<p>Задает начальный и конечный кадр анимации.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>start</code>, <code>end</code> - начальный и конечный кадр. Отсчет кадров начинается с нуля.</li>
</ul>
<hr />
<h2 id="actorsetframe">ActorSetFrame</h2>
<p><code>real ActorSetFrame(real actor, real frame);</code></p>
<p>Задает текущий кадр анимации.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>frame</code> - кадр.</li>
</ul>
<hr />
<h2 id="actorgetcurrentframe">ActorGetCurrentFrame</h2>
<p><code>real ActorGetCurrentFrame(real actor);</code></p>
<p>Возвращает текущий кадр анимации.</p>
<ul>
<li><code>actor</code> - указатель на актера.</li>
</ul>
<hr />
<h2 id="actorswitchtoanimation">ActorSwitchToAnimation</h2>
<p><code>real ActorSwitchToAnimation(real actor, real anim, real smooth);</code></p>
<p>Совершает переход к заданной анимационной последовательности.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>anim</code> - порядковый номер анимации</li>
<li><code>smooth</code> - плавный или резкий переход: <code>true</code> или <code>false</code> (1 и 0 соответственно).</li>
</ul>
<hr />
<h2 id="actorswitchtoanimationname">ActorSwitchToAnimationName</h2>
<p><code>real ActorSwitchToAnimationName(real actor, string anim, real smooth);</code></p>
<p>Совершает переход к заданной анимационной последовательности, определяемой именем.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>anim</code> - имя анимации</li>
<li><code>smooth</code> - плавный или резкий переход: <code>true</code> или <code>false</code> (1 и 0 соответственно).</li>
</ul>
<hr />
<h2 id="actoranimationnextframe">ActorAnimationNextFrame</h2>
<p><code>real ActorAnimationNextFrame(real actor);</code></p>
<p>Переключает кадр анимации на шаг вперед.</p>
<ul>
<li><code>actor</code> - указатель на актера.</li>
</ul>
<hr />
<h2 id="actoranimationprevframe">ActorAnimationPrevFrame</h2>
<p><code>real ActorAnimationPrevFrame(real actor);</code></p>
<p>Переключает кадр анимации на шаг назад.</p>
<ul>
<li><code>actor</code> - указатель на актера.</li>
</ul>
<hr />
<h2 id="actorsynchronize">ActorSynchronize</h2>
<p><code>real ActorSynchronize(real actor1, real actor2);</code></p>
<p>Синхронизирует анимацию актера 1 с актером 2.</p>
<ul>
<li><code>actor1</code> - указатель на актера 1</li>
<li><code>actor2</code> - указатель на актера 2.</li>
</ul>
<hr />
<h2 id="actorsetinterval">ActorSetInterval</h2>
<p><code>real ActorSetInterval(real actor, real interval);</code></p>
<p>Задает временной интервал интерполяции между двумя кадрами. Чем выше это значение - тем медленнее анимация.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>interval</code> - интервал (в миллисекундах).</li>
</ul>
<hr />
<h2 id="actorsetanimationmode">ActorSetAnimationMode</h2>
<p><code>real ActorSetAnimationMode(real actor, real aam);</code></p>
<p>Задает режим воспроизведения анимации.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>aam</code> - режим анимации. Доступны следующие значения <code>aam</code>:<ul>
<li><code>aamNone</code> = 0 - анимация не воспроизводится;</li>
<li><code>aamPlayOnce</code> = 1 - анимация воспроизводится один раз и останавливается при достижении конечного кадра;</li>
<li><code>aamLoop</code> = 2 - повторяется циклически (по умолчанию);</li>
<li><code>aamBounceForward</code> = 3 - повторяется циклически вперед до конечного кадра, затем в обратную сторону до начального кадра, затем опять вперед и так далее;</li>
<li><code>aamBounceBackward</code> = 4 - то же самое, но в обратную сторону;</li>
<li><code>aamLoopBackward</code> = 5 - повторяется циклически в обратную сторону.</li></ul></li>
</ul>
<hr />
<h2 id="actorsetframeinterpolation">ActorSetFrameInterpolation</h2>
<p><code>real ActorSetFrameInterpolation(real actor, real afp);</code></p>
<p>Задает режим интерполяции между кадрами.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>afp</code> - режим интерполяции. Доступны следующие значения <code>afp</code>:<ul>
<li><code>afpNone</code> = 0 - резкая смена кадров;</li>
<li><code>afpLinear</code> = 1 - линейная интерполяция.</li></ul></li>
</ul>
<hr />
<h2 id="actoraddobject">ActorAddObject</h2>
<p><code>real ActorAddObject(real actor, string filename);</code></p>
<p>Особенность некоторых форматов (SMD, MD5) - раздельное хранение модели и анимации. Данная функция добавляет актеру новую анимационную последовательность из файла и присваивает ей порядковый номер. Отсчет ведется с 1.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>filename</code> - путь к файлу с анимацией.</li>
</ul>
<hr />
<h2 id="actoranimationdestroy">ActorAnimationDestroy</h2>
<p><code>real ActorAnimationDestroy(real actor, real index);</code></p>
<p>Удаляет анимацию актера под индексом index.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>index</code> - индекс анимации.</li>
</ul>
<hr />
<h2 id="actorgetcurrentanimation">ActorGetCurrentAnimation</h2>
<p><code>string ActorGetCurrentAnimation(real actor);</code></p>
<p>Возвращает текущую анимационную последовательность - путь к файлу анимации без расширения.</p>
<ul>
<li><code>actor</code> - указатель на актера.</li>
</ul>
<hr />
<h2 id="actorgetframecount">ActorGetFrameCount</h2>
<p><code>real ActorGetFrameCount(real actor);</code></p>
<p>Возвращает общее количество кадров анимации.</p>
<ul>
<li><code>actor</code> - указатель на актера.</li>
</ul>
<hr />
<h2 id="actorgetanimationcount">ActorGetAnimationCount</h2>
<p><code>real ActorGetAnimationCount(real actor);</code></p>
<p>Возвращает количество анимаций актера.</p>
<ul>
<li><code>actor</code> - указатель на актера.</li>
</ul>
<hr />
<h2 id="actorgetanimationname">ActorGetAnimationName</h2>
<p><code>string ActorGetAnimationName(real actor, real index);</code></p>
<p>Возвращает имя анимации под заданным индексом.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>index</code> - индекс анимации.</li>
</ul>
<hr />
<h2 id="actorgetbonecount">ActorGetBoneCount</h2>
<p><code>real ActorGetBoneCount(real actor);</code></p>
<p>Возвращает общее количество костей в скелете актера.</p>
<ul>
<li><code>actor</code> - указатель на актера.</li>
</ul>
<hr />
<h2 id="actorgetbonebyname">ActorGetBoneByName</h2>
<p><code>real ActorGetBoneByName(real actor, string bonename);</code></p>
<p>Возвращает индекс кости с заданным именем.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>bonename</code> - имя кости. </li>
</ul>
<hr />
<h2 id="actorrotatebone">ActorRotateBone</h2>
<p><code>real ActorRotateBone(real actor, real boneindex, real x, real y, real z);</code></p>
<p>Поворачивает кость.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>boneindex</code> - индекс кости</li>
<li><code>x</code>, <code>y</code>, <code>z</code> - углы поворота по трем осям.</li>
</ul>
<hr />
<h2 id="actorgetbonerotation">ActorGetBoneRotation</h2>
<p><code>real ActorGetBoneRotation(real actor, real boneindex, real index);</code></p>
<p>Возвращает локальный угол поворота кости по заданной оси.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>boneindex</code> - индекс кости</li>
<li><code>index</code> - индекс оси (0 = X, 1 = Y, 2 = Z).</li>
</ul>
<hr />
<h2 id="actormovebone">ActorMoveBone</h2>
<p><code>real ActorMoveBone(real actor, real boneindex, real x, real y, real z);</code></p>
<p>Перемещает кость.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>boneindex</code> - индекс кости</li>
<li><code>x</code>, <code>y</code>, <code>z</code> - координаты смещения по трем осям.</li>
</ul>
<hr />
<h2 id="actorgetboneposition">ActorGetBonePosition</h2>
<p><code>real ActorGetBonePosition(real actor, real boneindex, real index);</code></p>
<p>Возвращает координату локального смещения кости по заданной оси.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>boneindex</code> - индекс кости</li>
<li><code>index</code> - индекс оси (0 = X, 1 = Y, 2 = Z).</li>
</ul>
<hr />
<h2 id="actorshowskeleton">ActorShowSkeleton</h2>
<p><code>real ActorShowSkeleton(real actor, real mode);</code></p>
<p>Включает или выключает схематичное отображение скелета.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>mode</code> - <code>true</code> или <code>false</code> (1 и 0 соответственно).</li>
</ul>
<hr />
<h2 id="actorboneexportmatrix">ActorBoneExportMatrix</h2>
<p><code>real ActorBoneExportMatrix(real actor, real boneindex, real object);</code></p>
<p>Копирует матрицу трансформации кости в локальную матрицу трансформации заданного объекта - иными словами, прикрепляет объект к кости. Матрица локальна относительно актера, поэтому для полноценного прикрепления объект нужно сделать дочерним по отношению к актеру. Эта функция незаменима, когда нужно, например дать в руки герою оружие или надеть на него броню.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>boneindex</code> - индекс кости</li>
<li><code>object</code> - id объекта.</li>
</ul>
<hr />
<h2 id="actormakeskeletaltranslationstatic">ActorMakeSkeletalTranslationStatic</h2>
<p><code>real ActorMakeSkeletalTranslationStatic(real actor, real anim);</code></p>
<p>Некоторые модели SMD содержат смещение скелета в анимации ходьбы - данная функция устраняет это смещение.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>anim</code> - порядковый номер анимации.</li>
</ul>
<hr />
<h2 id="actormakeskeletalrotationdelta">ActorMakeSkeletalRotationDelta</h2>
<p><code>real ActorMakeSkeletalRotationDelta(real actor, real anim);</code></p>
<p>Сведения отсутствуют.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>anim</code> - порядковый номер анимации.</li>
</ul>
<hr />
<h2 id="animationblendercreate">AnimationBlenderCreate</h2>
<p><code>real AnimationBlenderCreate();</code></p>
<p>Создает смешиватель анимации - объект, при помощи которого вы можете применить дополнительную анимацию к актеру - и возвращает указатель на него.</p>
<hr />
<h2 id="animationblendersetactor">AnimationBlenderSetActor</h2>
<p><code>real AnimationBlenderSetActor(real animblender, real actor);</code></p>
<p>Применяет смешиватель анимации к актеру.</p>
<ul>
<li><code>animblender</code> - указатель на смешивателя анимации</li>
<li><code>actor</code> - указатель на актера.</li>
</ul>
<hr />
<h2 id="animationblendersetanimation">AnimationBlenderSetAnimation</h2>
<p><code>real AnimationBlenderSetAnimation(real animblender, string animname);</code></p>
<p>Задает анимацию, которую нужно смешать с основной анимацей актера.</p>
<ul>
<li><code>animblender</code> - указатель на смешивателя анимации</li>
<li><code>animname</code> - имя анимации.</li>
</ul>
<hr />
<h2 id="animationblendersetratio">AnimationBlenderSetRatio</h2>
<p><code>real AnimationBlenderSetRatio(real animblender, real ratio);</code></p>
<p>Устанавливает кадровую позицию смешиваемой анимации в виде значения от 0 до 1 (0 - первый кадр, 1 - последний кадр). Таким образом, основная и дополнительная анимации могут быть рассинхронизированы во времени, и вы можете контролировать их скорость по отдельности.</p>
<ul>
<li><code>animblender</code> - указатель на смешивателя анимации</li>
<li><code>ratio</code> - кадровая позиция.</li>
</ul>
<hr />
<h2 id="actorloadq3taglist">ActorLoadQ3TagList</h2>
<p><code>real ActorLoadQ3TagList(string filename);</code></p>
<p>Загружает список анимационных меток из файла MD3 и возвращает указатель на него. Метки - это особенность формата MD3: они используются для того, чтобы прикреплять объекты к разным частям модели и синхронизировать их с вершинной анимацией.</p>
<ul>
<li><code>filename</code> - имя файла MD3.</li>
</ul>
<hr />
<h2 id="actorq3tagexportmatrix">ActorQ3TagExportMatrix</h2>
<p><code>real ActorQ3TagExportMatrix(real actor, real taglist, string tagname, real object);</code></p>
<p>Копирует матрицу трансформации анимационной метки MD3 в матрицу трансформации объекта - то есть, прикрепляет объект к этой метке.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>taglist</code> - указатель на список меток</li>
<li><code>tagname</code> - имя метки</li>
<li><code>object</code> - id объекта.</li>
</ul>
<hr />
<h2 id="actorloadq3animations">ActorLoadQ3Animations</h2>
<p><code>real ActorLoadQ3Animations(real actor, string filename, string classname);</code></p>
<p>Загружает анимационную последовательность MD3 из файла CFG.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>filename</code> - имя файла CFG</li>
<li><code>classname</code> - имя класса анимационной последовательности.</li>
</ul>
<hr />
<h2 id="actormeshobjectscount">ActorMeshObjectsCount</h2>
<p><code>real ActorMeshObjectsCount(real actor);</code></p>
<p>Возвращает количество мешей в модели актера.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
</ul>
<hr />
<h2 id="actortrianglecount">ActorTriangleCount</h2>
<p><code>real ActorTriangleCount(real actor);</code></p>
<p>Возвращает количество треугольников в модели актера.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
</ul>
<hr />
<h2 id="actormeshsetvisible">ActorMeshSetVisible</h2>
<p><code>real ActorMeshSetVisible(real actor, real mesh, real mode);</code></p>
<p>Включает или выключает отображение меша актера.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>mesh</code> - индекс меша</li>
<li><code>mode</code> - <code>true</code> или <code>false</code> (1 и 0 соответственно).</li>
</ul>
<hr />
<h2 id="actorfacegroupscount">ActorFaceGroupsCount</h2>
<p><code>real ActorFaceGroupsCount(real actor, real mesh);</code></p>
<p>Возвращает количество фейсгрупп в заданном меше актера.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>mesh</code> - индекс меша.</li>
</ul>
<hr />
<h2 id="actorfacegroupgetmaterialname">ActorFaceGroupGetMaterialName</h2>
<p><code>real ActorFaceGroupGetMaterialName(real actor, real mesh, real fgroup);</code></p>
<p>Возвращает имя материала заданной фейсгруппы меша.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>mesh</code> - индекс меша</li>
<li><code>fgroup</code> - индекс фейсгруппы.</li>
</ul>
<hr />
<h2 id="actorfacegroupsetmaterial">ActorFaceGroupSetMaterial</h2>
<p><code>real ActorFaceGroupSetMaterial(real actor, real mesh, real fgroup, string material);</code></p>
<p>Задает материал фейсгруппе меша. Материал должен присутствовать в библиотеке материалов, указанной при создании актера.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>mesh</code> - индекс меша</li>
<li><code>fgroup</code> - индекс фейсгруппы</li>
<li><code>material</code> - имя материала.</li>
</ul>
<hr />
<h2 id="actorsetreference">ActorSetReference</h2>
<p><code>real ActorSetReference(real actor, real aar);</code></p>
<p>Задает тип анимации актера.</p>
<ul>
<li><code>actor</code> - указатель на актера</li>
<li><code>aar</code><ul>
<li><code>aarMorph</code> = 0 - вершинная анимация;</li>
<li><code>aarSkeleton</code> = 1 - скелетная анимация;</li>
<li><code>aarNone</code> = 2 - анимация отсутствует.</li></ul></li>
</ul>
</body>
</html>

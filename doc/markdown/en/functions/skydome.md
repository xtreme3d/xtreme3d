# Skydome

Skydome в дословном переводе означает "небесный купол", "небосвод". В древности люди считали, что небо - это своего рода круглый купол, окружающий землю, на котором подвешены солнце, луна, звезды и планеты. Есть известная гравюра с изображением человека, добравшегося до края света и с изумлением заглядывающего в дыру, проделанную в "небесной тверди".

В действительности все это, разумеется, не так. Но компьютерная графика - забавная штука. В ней и небо может быть куполом. А почему бы и нет? Skydome - объект фонового плана, поэтому добраться до него, как тот человек с гравюры, невозможно. Кроме того, предусмотрены почти все эффекты атмосферы. На куполе в буквальном смысле "подвешены" солнце и звезды. Солнце плавно ходит по небу: когда оно опускается к горизонту, мы наблюдаем закат. А потом небо темнеет и наступает ночь. Звезды мерцают, как настоящие. Единственный минус - нет облаков. Их придется делать самостоятельно. Это, вероятно, было допущено для того, чтобы не лишать разработчика возможности сделать, например, авиасимулятор: чтобы можно было как опуститься до самой земли, так и подняться к облакам и видеть их с близкого расстояния.

Цвет неба в skydome составлен из трех компонентов: Deep, Haze, Night и Sky.
- Deep - цвет так называемого надира - точки, противоположной зениту; она расположена у нас под ногами. Обычно в реальной жизни надир увидеть невозможно, земля мешает :) Но цвет этой точки важен, так как он определяет, с каким оттенком смешивается цвет неба по мере ухода за линию горизонта.
- Haze - цвет линии горизонта. Обычно соответствует цвету тумана.
- Sky - цвет зенита. В этот цвет окрашен весь небесный купол до линии горизонта.
- Night - цвет ночи. Когда солнце уходит за горизонт, этим цветом постепенно заполняются все компоненты неба, кроме Deep. Чаще всего это черный или темно-синий, хотя могут быть и другие варианты.

---

## SkydomeCreate

`real SkydomeCreate(real slices, real stacks, real parent);`

Создает новый объект skydome и возвращает указатель на него.

- `slices`, `stacks` - количество сегментов сферы по горизонтали и вертикали (параллелей и меридиан). Чем выше эти значения, тем качественнее выглядит небо.
- `parent` - указатель на родителя.

---

## SkydomeSetOptions

`real SkydomeSetOptions(real sky, real fade, real rotate);`

Задает две опции skydome: плавное появление звезд и поворот неба. Первая опция, по существу, определяет, нужно ли "прятать" звезды в дневное время. Вторая позволяет имитировать вращение Земли вокруг своей оси. Рекомендуется включить обе опции, так как по умолчанию они отключены.

- `sky` - указатель на объект skydome
- `fade` - `true` или `false` (1 и 0 соответственно)
- `rotate` - `true` или `false` (1 и 0 соответственно).

---

## SkydomeSetDeepColor

`real SkydomeSetDeepColor(real sky, real color);`

Задает цвет компонента Deep.

- `sky` - указатель на объект skydome
- `color` - цвет.

---

## SkydomeSetHazeColor

`real SkydomeSetHazeColor(real sky, real color);`

Задает цвет компонента Haze.

- `sky` - указатель на объект skydome
- `color` - цвет.

---

## SkydomeSetNightColor

`real SkydomeSetNightColor(real sky, real color);`

Задает цвет компонента Night.

- `sky` - указатель на объект skydome
- `color` - цвет.

---

## SkydomeSetSkyColor

`real SkydomeSetSkyColor(real sky, real color);`

Задает цвет компонента Sky.

- `sky` - указатель на объект skydome
- `color` - цвет.

---

## SkydomeSetSunDawnColor

`real SkydomeSetSunDawnColor(real sky, real color);`

Задает цвет солнца на закате и рассвете.

- `sky` - указатель на объект skydome
- `color` - цвет.

---

## SkydomeSetSunZenithColor

`real SkydomeSetSunZenithColor(real sky, real color);`

Задает цвет солнца в зените.

- `sky` - указатель на объект skydome
- `color` - цвет.

---

## SkydomeSetSunElevation

`real SkydomeSetSunElevation(real sky, real angle);`

Задает угол, под которым находится солнце по отношению к горизонту. Угол в 90 градусов соответствует зениту, -90 - надиру. Изменяя это значение, можно задать движение солнца по небу. Чтобы оно всходило на востоке, а садилось на западе, необходимо включить вращение неба функцией `SkydomeSetOptions`.

- `sky` - указатель на объект skydome
- `angle` - угол.

---

## SkydomeSetTurbidity

`real SkydomeSetTurbidity(real sky, real turbidity);`

Задает уровень мутности атмосферы, вследствие которой происходит рассеивание световых лучей и уменьшение четкости границ между цветовыми компонентами неба. Например, при низкой мутности солнце будет маленьким и четким, а при повышенной - огромным и размытым.

- `sky` - указатель на объект skydome
- `turbidity` - уровень мутности.

---

## SkydomeAddRandomStars

`real SkydomeAddRandomStars(real sky, real stars, real color);`

Добавляет на небо заданное количество звезд в произвольном порядке. По умолчанию звезд на небе нет.

- `sky` - указатель на объект skydome
- `stars` - количество звезд
- `color` - цвет звезд.

---

## SkydomeAddStar

`real SkydomeAddStar(real sky, real ra, real dec, real mag, real color);`

Добавляет на небо новую звезду. Положение звезды задается во второй экваториальной системе координат - прямым восхождением (right ascension) и склонением (declination). Обе величины задаются в градусах, хотя в астрономии прямое восхождение традиционно измеряется в часах, минутах и секундах (1 угловой час равен 360 / 24 = 15 градусам). Чтобы упростить перевод этих единиц в градусы, в Xtreme3D SDK есть скрипт `RightAscension(hours, minutes, seconds)`. Также имеется скрипт `Declination(degrees, minutes, seconds)`, при помощи которого можно получить единую величину из градусов, угловых минут и угловых секунд.

- `sky` - указатель на объект skydome
- `ra` - прямое восхождение
- `dec` - склонение
- `mag` - звездная величина
- `color` - цвет.

---

## SkydomeClearStars

`real SkydomeClearStars(real sky);`

Удаляет все звезды с неба.

- `sky` - указатель на объект skydome.

---

## SkydomeTwinkleStars

`real SkydomeTwinkleStars(real sky, real mode);`

Включает и выключает мерцание звезд.

- `sky` - указатель на объект skydome
- `mode` - `true` или `false` (1 и 0 соответственно).

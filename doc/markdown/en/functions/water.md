# Water

Реалистичная анимированная вода (water) является своего рода визитной карточкой Xtreme3D. Это и в самом деле красивый спецэффект, позволяющий добиться высокой степени реализма сцены. Однако использовать воду надо осторожно, так как вычисления, связанные с ней, довольно ресурсоемки.

Вода представляет собой плоскую поверхность, разбитую на определенное количество квадов, на которых возникают концентрические волновые возмущения - получается эффект "дождя". Также поддерживаются линейные волны, как в океане - они параллельны, вычисляются по синусоиде и равномерно движутся по всей поверхности воды.

Сама по себе вода - всего лишь геометрия и никакими свойствами жидкости, кроме волн, не обладает. Поэтому все остальные эффекты, усиливающие впечатление от воды (отражение, брызги, физику плавающих объектов и т.д.) вам придется писать самостоятельно.

---

## WaterCreate

`real WaterCreate(real parent);`

Создает новую воду и возвращает указатель на нее.

- `parent` - указатель на родителя.

---

## WaterCreateRandomRipple

`real WaterCreateRandomRipple(real water);`

Создает случайное возмущение на поверхности воды.

- `water` - указатель на воду.

---

## WaterCreateRippleAtGridPosition

`real WaterCreateRippleAtGridPosition(real water, real x, real y);`

Создает возмущение в заданной точке на поверхности воды. Координаты точки возмущения задаются относительно исходной точки поверхности.

- `water` - указатель на воду
- `x`, `y` - координаты точки возмущения.

---

## WaterCreateRippleAtWorldPosition

`real WaterCreateRippleAtWorldPosition(real water, real x, real y, real z);`

Создает возмущение в заданной точке на поверхности воды. Координаты точки возмущения задаются относительно абсолютного начала координат.

- `water` - указатель на воду
- `x`, `y`, `z` - координаты точки возмущения.

---

## WaterCreateRippleAtObjectPosition

`real WaterCreateRippleAtObjectPosition(real water, real object);`

Создает возмущение в точке на поверхности воды, соответствующей абсолютной позиции заданного объекта. Функция пригождается, если нужно сделать волны, расходящиеся от упавшего в воду предмета.

- `water` - указатель на воду
- `object` - указатель на объект.

---

## WaterSetMask

`real WaterSetMask(real water, string material);`

Загружает маску для воды из текстуры материала. Маска - монохромное изображение, в котором белые пиксели означают видимые части воды, черные - невидимые. Например, если задать черную маску с изображением белой окружности, получится круглый водоем.

- `water` - указатель на воду
- `material` - имя материала.

---

## WaterSetActive

`real WaterSetActive(real water, real mode);`

Включает или выключает анимацию воды.

- `water` - указатель на воду
- `mode` - `true` или `false` (1 и 0 соответственно).

---

## WaterReset

`real WaterReset(real water);`

Возвращает воду к ее первоначальному состоянию.

- `water` - указатель на воду.

---

## WaterSetRainTimeInterval

`real WaterSetRainTimeInterval(real water, real interval);`

Для воды можно задать автоматическую генерацию возмущений. Это будет выглядеть, как будто идет дождь. Данная функция задает временной интервал между двумя "каплями" в этом дожде. Если выставить это значение равным 0, то дождь будет отключен.

- `water` - указатель на воду
- `interval` - время в миллисекундах (в диапазоне от 0 до 1000000; по умолчанию 500).

---

## WaterSetRainForce

`real WaterSetRainForce(real water, real force);`

Задает силу, с которой падают капли "дождя". Чем меньше это значение, тем быстрее исчезают волны.

- `water` - указатель на воду
- `force` - сила "дождя" (в диапазоне от 0 до 1000000; по умолчанию 5000).

---

## WaterSetViscosity

`real WaterSetViscosity(real water, real viscosity);`

Задает вязкость воды - амплитуду возмущений. Чем меньше это значение, тем гелеобразнее жидкость.

- `water` - указатель на воду
- `viscosity` - вязкость (в диапазоне от 0 до 1; по умолчанию 0.99).

---

## WaterSetElastic

`real WaterSetElastic(real water, real elastic);`

Задает эластичность - скорость распространения возмущений. В реальном мире это свойство зависит от плотности вещества (например, у ртути плотность гораздо выше, чем у воды, поэтому волны распространяются быстрее).

- `water` - указатель на воду
- `elastic` - эластичность (по умолчанию 10).

---

## WaterSetResolution

`real WaterSetResolution(real water, real res);`

Задает разрешение воды - число квадов по стороне сетки. Чем выше это значение, тем выше качество воды, и, соответственно, ниже скорость ее работы.

- `water` - указатель на воду
- `res` - разрешение (от 16 и выше; по умолчанию 64).

---

## WaterSetLinearWaveHeight

`real WaterSetLinearWaveHeight(real water, real height);`

Задает высоту линейных волн.

- `water` - указатель на воду
- `height` - высота (по умолчанию 1).

---

## WaterSetLinearWaveFrequency

`real WaterSetLinearWaveFrequency(real water, real freq);`

Задает частоту линейных волн (по сути, длину одного колебания). Если выставить это значение равным 0, то линейные волны будут отключены.

- `water` - указатель на воду
- `freq` - частота (по умолчанию 0).

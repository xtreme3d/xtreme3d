# Proxy

Прокси - это специальный тип объекта, который не имеет собственной графики для отрисовки - он рисует графику другого объекта, но использует для этого собственную трансформацию. Иными словами, прокси - это лучший способ создать несколько копий 3D-модели, не дублируя ее в памяти.

Мультипрокси - подвид прокси, который может рисовать разные объекты в зависимости от удаленности от камеры. С его помощью вы можете реализовать дискретный LOD (level of detail) - систему адаптивной детализации: чем дальше прокси от камеры, тем более низкополигональную модель он рендерит.

Для актеров следует использовать специальный подвид прокси - ActorProxyObject. Он позволяет рендерить копию актера со своей анимацией - это необходимо, если у вас в игре сосуществуют несколько однотипных персонажей (например, врагов).

---

## ProxyObjectCreate

`real ProxyObjectCreate(real object, real parent);`

Создает новый прокси с графикой заданного объекта и возвращает указатель на него.

- `object` - указатель на объект
- `parent` - указатель на родителя для прокси.

---

## ProxyObjectSetOptions

`real ProxyObjectSetOptions(real proxy, real copyeffects, real copyobjects, real copytransform);`

Задает опции прокси.

- `proxy` - указатель на прокси
- `copyeffects` - указывает, копировать ли эффекты заданного объекта (речь идет о системах частиц, прикрепленных к объекту)
- `copyobjects` - указывает, копировать ли потомков объекта
- `copytransform` - указывает, копировать ли локальную трансформацию объекта.

---

## ProxyObjectSetTarget

`real ProxyObjectSetTarget(real proxy, real object);`

Задает целевой объект прокси.

- `proxy` - указатель на прокси
- `object` - указатель на объект.

---

## ActorProxyObjectCreate

`real ActorProxyObjectCreate(real actor, real parent);`

Создает новый прокси-актер и возвращает указатель на него.

- `actor` - указатель на актера
- `parent` - указатель на родителя для прокси.

---

## ActorProxyObjectSwitchToAnimation

`real ActorProxyObjectSwitchToAnimation(real proxy, real anim);`

Переключает анимационную последовательность для прокси-Актера с указанием номера анимации.

- `proxy` - указатель на прокси-актера
- `anim` - порядковый номер анимации.

---

## ActorProxyObjectSetAnimationRange

`real ActorProxyObjectSetAnimationRange(real proxy, real start, real end);`

Переключает анимационную последовательность для прокси-Актера с указанием первого и последнего кадра.

- `proxy` - указатель на прокси-актера
- `start`, `end` - первый и последний кадр анимации.

---

## ActorProxyObjectSetInterval

`real ActorProxyObjectSetInterval(real proxy, real interval);`

Задает интервал прокси-актера - время в миллисекундах между двумя ключевыми кадрами. Значение по умолчанию - 100.

- `proxy` - указатель на прокси
- `interval` - интервал.

---

## MultiProxyObjectCreate

`real MultiProxyObjectCreate(real parent);`

Создает новый мультипрокси и возвращает указатель на него.

- `parent` - указатель на родителя.

---

## MultiProxyObjectAddTarget

`real MultiProxyObjectAddTarget(real mproxy, real object, real mindist, real maxdist);`

Добавляет целевой объект в мультипрокси и задает диапазон расстояний от камеры, на котором этот объект должен рендериться.

- `parent` - указатель на мультипрокси
- `object` - указатель на объект
- `mindist` - минимальное расстояние, на котором мультипрокси должен рисовать данный целевой объект
- `maxdist` - максимальное расстояние, на котором мультипрокси должен рисовать данный целевой объект.

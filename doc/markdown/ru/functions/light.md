# Light

Объект, создающий освещение. Источники освещения могут быть различных типов и иметь различные характеристики. Это аналоги осветительных приборов реального мира, которые обладают дополнительными возможностями, недоступными реальным источникам.

Источники света могут быть трех типов:
- Omni (точечный свет) - светит одинаково во всех направлениях из одной точки, как, например, лампочка;
- Spot (направленный свет) - светит не во всех направлениях, а в пределах некоего конуса. Освещаются только объекты, попадающие в этот конус. Простой пример - фонарик;
- Parallel (параллельный свет) - имитирует удаленные источники света, например, солнце. Свет излучается в направлении только одной оси, из источника, находящегося на бесконечно большом расстоянии от зрителя, а все световые лучи являются параллельными.

Цвет освещаемых объектов рассчитывается как сумма компонентов Ambient, Diffuse и Specular от всех Источников света в сцене:
- Аmbient (равномерный компонент) - аппроксимация глобального освещения, общий цвет для всех объектов, не зависящий от других факторов;
- Diffuse (диффузный компонент) - зависит от положения источника освещения и от нормали поверхности. Этот компонент влияет на цвет освещенных (повернутых к свету) частей объектов;
-Specular (бликовый компонент) - определяет цвет бликов отражения лучей света от поверхности. Эти блики существенно увеличивают реалистичность изображения, ведь редкие реальные поверхности не отражают свет, поэтому данная составляющая очень важна.

Обратите внимание, что сами объекты также могут иметь индивидуальные компоненты Ambient, Diffuse и Specular, влияющие на цвет.

Xtreme3D поддерживает до восьми динамических источников освещения. Чтобы создать большее количество, воспользуйтесь эффектом LightFX.

---

## LightCreate

`real LightCreate(real ls, real parent);`

Создает новый источник освещения и возвращает указатель на него.

- `ls` - тип источника освещения (`lsSpot`, `lsOmni` или `lsParallel` - соответственно, 0, 1 или 2)
- `parent` - указатель на родителя для источника освещения (0 - отсутствие родителя).

---

## LightSetAmbientColor

`real LightSetAmbientColor(real light, real color);`

Задает компонент Аmbient источника освещения.

- `light` - указатель на источник освещения
- `color` - цвет компонента.

---

## LightSetDiffuseColor

`real LightSetDiffuseColor(real light, real color);`

Задает компонент Diffuse источника освещения.

- `light` - указатель на источник освещения
- `color` - цвет компонента.

---

## LightSetSpecularColor

`real LightSetSpecularColor(real light, real color);`

Задает компонент Specular источника освещения.

- `light` - указатель на источник освещения
- `color` - цвет компонента.

---

## LightGetColor

`real LightGetColor(real light, real ind);`

Возвращает цветовой компонент источника освещения.

- `light` - указатель на источник освещения
- `ind` - индекс компонента (0 = Ambient, 1 = Diffuse, 2 = Specular).

---

## LightSetAttenuation

`real LightSetAttenuation(real light, real constant, real linear, real quadratic);`

Точечные и направленные источники света обладают параметром, влияющим на силу освещения - так называемое затухание (attenuation). Этот параметр влияет на убывание интенсивности света с расстоянием. В квадратное уравнение, определяющее интенсивность света, входят три параметра: постоянная, линейная и квадратичная составляющие (constant, linear, quadratic). По умолчанию им присваиваются значения 1, 0 и 0 соответственно - интенсивность света от такого источника не убывает с расстоянием. Уравнение выглядит следующим образом:

*a = c + ld + qd<sup>2</sup>*

где а - величина затухания, с - постоянная составляющая (constant), l - линейная составляющая (linear), q - квадратичная составляющая (quadratic), d - расстояние от источника света. 
Данная функция задает величину затухания через эти три составляющие.

- `light` - указатель на источник освещения
- `constant` - постоянная составляющая затухания
- `linear` - линейная составляющая затухания
- `quadratic` - квадратичная составляющая затухания.

---

## LightGetAttenuation

`real LightGetAttenuation(real light, real ind);`

Возвращает составляющую затухания источника освещения.

- `light` - указатель на источник освещения
- `ind` - индекс составляющей (0 = Constant, 1 = Linear, 2 = Quadratic).

---

## LightSetShining

`real LightSetShining(real light, real mode);`

Включает или выключает источник освещения.

- `light` - указатель на источник освещения
- `mode` - `true` или `false` (1 и 0 соответственно).

---

## LightGetShining

`real LightGetShining(real light);`

Возвращает 1, если источник света включен, и 0 в противном случае.

- `light` - указатель на источник освещения.

---

## LightSetSpotCutoff

`real LightSetSpotCutoff(real light, real cutoff);`

Для направленного источника освещения задает угол между осью и стороной ограничивающего конуса (он же половина угла конуса). Иными словами, влияет на ширину конуса света. Если данное значение соответствует 180 градусам, направленный источник света рассматривается как точечный.

- `light` - указатель на источник освещения
- `cutoff` - угол.

---

## LightSetSpotExponent

`real LightSetSpotExponent(real light, real exponent);`

Для направленного источника освещения задает экспоненту убывания интенсивности в зависимости от угла между осью ограничивающего конуса и лучом распространения света.

- `light` - указатель на источник освещения
- `exponent` - экспонента.

---

## LightSetSpotDirection

`real LightSetSpotDirection(real light, real x, real y, real z);`

Для направленного источника освещения задает направление оси ограничивающего конуса.

- `light` - указатель на источник освещения
- `x`, `y`, `z` - единичный вектор направления.

---

## LightSetStyle

`real LightSetStyle(real light, real ls);`

Задает тип источника освещения.

- `light` - указатель на источник освещения
- `ls` - тип источника освещения (`lsSpot`, `lsOmni` или `lsParallel` - соответственно, 0, 1 или 2).

---

## LightFXCreate

`real LightFXCreate(real obj);`

Добавляет объекту эффект LightFX. LightFX - это система виртуализированного освещения, позволяющая использовать до 8 ближайших источников света для освещения объекта. Общее количество источников света при этом не ограничено - то есть, ограничение в 8 источников касается только каждого объекта, использующего эту систему, а не всей сцены целиком. Источники света создаются как обычно, функцией LightCreate. Наибольшим приоритетом обладают источники типа `lsParallel` - они всегда учитываются первыми при сортировке источников. Источники типа `lsSpot` и `lsOmni` сортируются в зависимости от удаленности от объекта.

- `obj` - указатель на объект.

<HTML>
<HEAD>
<META http-equiv=Content-Type content="text/html; charset=windows-1251">
<TITLE>Font & Text</TITLE>
<LINK href="../data/style.css" type=text/css rel=stylesheet>
</HEAD>
<BODY>

<DIV ALIGN=justify>

<H1 class=pagetitle>Font & Text</H1>

<A class=type>Класс: TGLBitmapFont, TGLWindowsBitmapFont, TGLFreetypeFont, TGLHUDText, TGLSpaceText, TGLSpaceText</A><BR><BR>

<A>Шрифт и текст. Xtreme3D поддерживает три типа текстовых объектов: плоский, объемный и экранный. Экранный текст (HUDText) отображается поверх отрендеренной картинки и применяется для представления некоей текстовой информации в игре: количество жизней или патронов, различных сообщений и пр. Плоский текст (FlatText) и объемный (SpaceText) располагаются в трехмерном пространстве. Объемный, в отличие от плоского, имеет толщину.</A>
<BR><A>Все типы текста используют специальные шрифтовые объекты, хранящие изображения текстовых символов - букв, цифр и знаков препинания. В Xtreme3D поддерживается три вида шрифтовых объектов: Bmpfont, WindowsBitmapfont и TTFont. 
<BR>Шрифт-изображение (Bmpfont) представляет собой одну большую текстуру с символьной "сеткой", в которую заранее записаны изображения символов. Ее можно создать вручную в графическом редакторе, нарисовать символы любого цвета и сложности. Однако такой шрифт содержит ограниченный диапазон символов - обычно только таблицу ASCII, которая включает латинский алфавит, цифры и стандартные знаки препинания. Теоретически, диапазон может быть расширен с использованием кодовых страниц ANSI, но это решение не сработает, если вам нужно выводить текст с символами из нескольких разных алфавитов - то есть, при использовании в приложении русского языка нельзя, например, выводить греческие буквы.
<BR>Полноценно эта проблема решается только с использованием Юникода, где каждый символ имеет свой уникальный код. В Xtreme3D поддержка Юникода реализована в виде шрифтового объекта TTFont, основанного на движке FreeType - он создается из произвольного TTF-файла и по необходимости динамически подгружает любые символы, которые вы захотите вывести, хоть китайские иероглифы (если, конечно, они  поддерживаются вашим шрифтом). 
<BR>Единственный недостаток этого метода - необходимость передавать текст строго в кодировке UTF-8. Game Maker 8, к сожалению, не имеет встроенной поддержки UTF-8, и если вы попытаетесь просто вывести русский текст, напечатанный в редакторе кода GM, то ничего не получится - строка будет передана в кодировке ANSI. Справиться с этим можно двумя способами: во-первых, сконвертировать ANSI-строку в UTF-8 функцией 
</A><A class=funclink href=../functions/text.htm#TextConvertANSIToUTF8>TextConvertANSIToUTF8</A><A>, а во-вторых, загрузить текст из файла, закодированного в UTF-8, функцией </A><A class=funclink href=../functions/text.htm#TextRead>TextRead</A><A>. Второе более предпочтительно, поскольку ANSI в любом случае не позволит вам использовать символы, не соответствующие текущей кодовой странице.
<BR>Если же вы хотите выводить только ASCII (то есть, латиницу), то ничего конвертировать не надо - ASCII-символы в UTF-8 выглядят "как есть" и не требуют никакого специального кодирования.
<BR>Для использования шрифтов TTFont в папке с игрой должна быть библиотека freetype.dll (ищите ее в Xtreme3D SDK). Если вы не используете эту функциональность, то библиотека необязательна.
<BR>В целях обратной совместимости (и работы с объемным 3D-текстом) оставлен также третий вид шрифтовых объектов - системный (WindowsBitmapfont). Это, фактически, Bmpfont, который автоматически генерируется из указанного системного шрифта, установленного в Windows. Данный вид шрифтов также работает только с ANSI и, к тому же, не может загружать шрифты из произвольных TTF-файлов, поэтому для экранного текста вместо него рекомендуется использовать TTFont.
<BR>На следующей таблице наглядно показаны возможности всех шрифтовых объектов:
<BR>
<BR>
<TABLE WIDTH=50% BORDER=1 BORDERCOLOR="#000000" CELLPADDING=2 CELLSPACING=0>
	<COL WIDTH=51*>
	<COL WIDTH=51*>
	<COL WIDTH=51*>
	<COL WIDTH=51*>
	<COL WIDTH=51*>
	<COL WIDTH=51*>
	<TR>
		<TD WIDTH=20% HEIGHT=16>
			<P><BR></P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#ff9966">
			<P ALIGN=CENTER><B>Источник данных</B></P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#ff9966">
			<P ALIGN=CENTER><B>Кодировка текста</B></P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#ff9966">
			<P ALIGN=CENTER><B>Поддержка HUDText</B></P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#ff9966">
			<P ALIGN=CENTER><B>Поддержка FlatText</B></P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#ff9966">
			<P ALIGN=CENTER><B>Поддержка SpaceText</B></P>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=20% HEIGHT=17 BGCOLOR="#ff9966">
			<P ALIGN=CENTER><B>Bmpfont</B></P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#ffffff">
			<P ALIGN=CENTER>Текстура</P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#ffffff">
			<P ALIGN=CENTER>ANSI</P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#3deb3d">
			<P ALIGN=CENTER>Да</P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#3deb3d">
			<P ALIGN=CENTER>Да</P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#dc2300">
			<P ALIGN=CENTER>Нет</P>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=20% HEIGHT=17 BGCOLOR="#ff9966">
			<P ALIGN=CENTER><B>WindowsBitmapfont</B></P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#ffffff">
			<P ALIGN=CENTER>Шрифт Windows</P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#ffffff">
			<P ALIGN=CENTER>ANSI</P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#3deb3d">
			<P ALIGN=CENTER>Да</P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#3deb3d">
			<P ALIGN=CENTER>Да</P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#3deb3d">
			<P ALIGN=CENTER>Да</P>
		</TD>
	</TR>
	<TR>
		<TD WIDTH=20% HEIGHT=17 BGCOLOR="#ff9966">
			<P ALIGN=CENTER><B>TTFont</B></P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#ffffff">
			<P ALIGN=CENTER>Шрифт TTF</P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#ffffff">
			<P ALIGN=CENTER>UTF-8</P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#3deb3d">
			<P ALIGN=CENTER>Да</P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#3deb3d">
			<P ALIGN=CENTER>Да</P>
		</TD>
		<TD WIDTH=20% BGCOLOR="#dc2300">
			<P ALIGN=CENTER>Нет</P>
		</TD>
	</TR>
</TABLE>
<BR>
<BR>
<BR>Обратите также внимание, что Xtreme3D, в отличие от встроенных функций GML, не распознает в строковых значениях символ # как переход на следующую строку. Вместо него рекомендуется использовать тринадцатый символ ASCII - </A><A class=type>chr</A><A>(13). Например:
<BR></A><A class=funclink href=../functions/fonttext.htm#HUDTextSetText>HUDTextSetText</A><A>(text, "line 1" + </A><A class=type>chr</A><A>(13) + "line 2").</A>
<BR><HR>

<A name="BmpfontCreate"></A>
<H1 class=name>BmpfontCreate</H1>
<A class=type>real</A><A> = </A><A class=function>BmpfontCreate</A><A>( width,height,hspace,vspace,intx,inty,start,end as </A><A class=type>real</A><A> );</A>
<BR><A>Создает новый шрифт и возвращает его id.</A>
<BR><A>width,height - ширина и высота символа в пикселях</A>
<BR><A>hspace,vspace - промежуток между символами по горизонтали и вертикали в пикселях</A>
<BR><A>inx,inty - координаты начала отсчета символов (крайняя верхняя левая точка)</A>
<BR><A>start,end - номера первого и последнего символа. Для латиницы эти значения соответствуют 32 и 95.</A>
<HR>

<A name="BmpfontLoad"></A>
<H1 class=name>BmpfontLoad</H1>
<A class=type>real</A><A> = </A><A class=function>BmpfontLoad</A><A>( font as </A><A class=type>real</A><A>,material as </A><A class=type>string</A><A> );</A>
<BR><A>Загружает изображение шрифта из текстуры указанного материала.</A>
<BR><A>font - id шрифта</A>
<BR><A>material - имя Материала.</A>
<HR>

<A name="TTFontCreate"></A>
<H1 class=name>TTFontCreate</H1>
<A class=type>real</A><A> = </A><A class=function>TTFontCreate</A><A>( filename as </A><A class=type>string</A><A>,height as </A><A class=type>real</A><A> );</A>
<BR><A>Создает новый TTF-шрифт и возвращает его id.</A>
<BR><A>filename - имя файла TTF</A>
<BR><A>height - кегль (размер) шрифта в пикселях.</A>
<HR>

<A name="TTFontSetLineGap"></A>
<H1 class=name>TTFontSetLineGap</H1>
<A class=type>real</A><A> = </A><A class=function>TTFontSetLineGap</A><A>( ttf,gap as </A><A class=type>real</A><A> );</A>
<BR><A>Задает междустрочный интервал TTF-шрифта, который используется при выводе многострочного текста. Интервал задается не в пикселях, а в долях от кегля шрифта - то есть, значение 1 соответствует интервалу, равному высоте одной строки текста.</A>
<BR><A>ttf - id TTF-шрифта</A>
<BR><A>gap - междустрочный интервал.</A>
<HR>

<A name="WindowsBitmapfontCreate"></A>
<H1 class=name>WindowsBitmapfontCreate</H1>
<A class=type>real</A><A> = </A><A class=function>WindowsBitmapfontCreate</A><A>( fontname as </A><A class=type>string</A><A>, size,start,end as </A><A class=type>real</A><A> );</A>
<BR><A>Загружает системный шрифт Windows и возвращает его id.</A>
<BR><A>fontname - название шрифта, например: 'Arial'</A>
<BR><A>size - размер шрифта</A>
<BR><A>start,end - номера первого и последнего символа. Для латиницы эти значения соответствуют 32 и 95.</A>
<HR>

<A name="FlatTextCreate"></A>
<H1 class=name>FlatTextCreate</H1>
<A class=type>real</A><A> = </A><A class=function>FlatTextCreate</A><A>( font as </A><A class=type>real</A><A>, string as </A><A class=type>string</A>
<A>, parent as </A><A class=type>real</A><A> );</A>
<BR><A>Создает плоский трехмерный текст и возвращает его id.</A>
<BR><A>font - id шрифта</A>
<BR><A>string - текстовая строка для отображения</A>
<BR><A>parent - id родителя для текстового объекта (0 - отсутствие родителя).</A>
<HR>

<A name="FlatTextSetFont"></A>
<H1 class=name>FlatTextSetFont</H1>
<A class=type>real</A><A> = </A><A class=function>FlatTextSetFont</A><A>( text,font as </A><A class=type>real</A><A> );</A>
<BR><A>Задает шрифт плоского текста.</A>
<BR><A>font - id текста</A>
<BR><A>font - id шрифта.</A>
<HR>

<A name="FlatTextSetColor"></A>
<H1 class=name>FlatTextSetColor</H1>
<A class=type>real</A><A> = </A><A class=function>FlatTextSetColor</A><A>( text,color,alpha as </A><A class=type>real</A><A> );</A>
<BR><A>Задает цвет плоского текста.</A>
<BR><A>font - id текста</A>
<BR><A>color - цвет</A>
<BR><A>alpha - прозрачность.</A>
<HR>

<A name="FlatTextSetText"></A>
<H1 class=name>FlatTextSetText</H1>
<A class=type>real</A><A> = </A><A class=function>FlatTextSetText</A><A>( text as </A><A class=type>real</A>
<A>, string as </A><A class=type>string</A><A> );</A>
<BR><A>Задает текстовую строку для отображения плоским текстом.</A>
<BR><A>text - id текстового объекта</A>
<BR><A>string - текстовая строка.</A>
<HR>

<A name="HUDTextCreate"></A>
<H1 class=name>HUDTextCreate</H1>
<A class=type>real</A><A> = </A><A class=function>HUDTextCreate</A><A>( font as </A><A class=type>real</A><A>, string as </A><A class=type>string</A>
<A>, parent as </A><A class=type>real</A><A> );</A>
<BR><A>Создает экранный текст и возвращает его id.</A>
<BR><A>font - id шрифта</A>
<BR><A>string - текстовая строка для отображения</A>
<BR><A>parent - id родителя для текстового объекта (0 - отсутствие родителя).</A>
<HR>

<A name="HUDTextSetRotation"></A>
<H1 class=name>HUDTextSetRotation</H1>
<A class=type>real</A><A> = </A><A class=function>HUDTextSetRotation</A><A>( text,angle as </A><A class=type>real</A><A> );</A>
<BR><A>Задает угол поворота экранного текста.</A>
<BR><A>text - id текстового объекта</A>
<BR><A>angle - угол поворота в градусах.</A>
<HR>

<A name="HUDTextSetFont"></A>
<H1 class=name>HUDTextSetFont</H1>
<A class=type>real</A><A> = </A><A class=function>HUDTextSetFont</A><A>( text,font as </A><A class=type>real</A><A> );</A>
<BR><A>Задает шрифт экранного текста.</A>
<BR><A>font - id текста</A>
<BR><A>font - id шрифта.</A>
<HR>

<A name="HUDTextSetColor"></A>
<H1 class=name>HUDTextSetColor</H1>
<A class=type>real</A><A> = </A><A class=function>HUDTextSetColor</A><A>( text,color,alpha as </A><A class=type>real</A><A> );</A>
<BR><A>Задает цвет экранного текста.</A>
<BR><A>font - id текста</A>
<BR><A>color - цвет</A>
<BR><A>alpha - прозрачность.</A>
<HR>

<A name="HUDTextSetText"></A>
<H1 class=name>HUDTextSetText</H1>
<A class=type>real</A><A> = </A><A class=function>HUDTextSetText</A><A>( text as </A><A class=type>real</A>
<A>, string as </A><A class=type>string</A><A> );</A>
<BR><A>Задает текстовую строку для отображения экранным текстом.</A>
<BR><A>text - id текстового объекта</A>
<BR><A>string - текстовая строка.</A>
<HR>

<A name="SpaceTextCreate"></A>
<H1 class=name>SpaceTextCreate</H1>
<A class=type>real</A><A> = </A><A class=function>SpaceTextCreate</A><A>( font as </A><A class=type>real</A><A>, string as </A><A class=type>string</A>
<A>, extrusion,parent as </A><A class=type>real</A><A> );</A>
<BR><A>Создает объемный трехмерный текст и возвращает его id.</A>
<BR><A>font - id шрифта. Поддерживается только WindowsBitmapfont</A>
<BR><A>string - текстовая строка для отображения</A>
<BR><A>extrusion - толщина текста</A>
<BR><A>parent - id родителя для текстового объекта (0 - отсутствие родителя).</A>
<HR>

<A name="SpaceTextSetExtrusion"></A>
<H1 class=name>SpaceTextSetExtrusion</H1>
<A class=type>real</A><A> = </A><A class=function>SpaceTextSetExtrusion</A><A>( text,extrusion as </A><A class=type>real</A><A> );</A>
<BR><A>Задает толщину объемного текста.</A>
<BR><A>text - id текстового объекта</A>
<BR><A>extrusion - толщина текста.</A>
<HR>

<A name="SpaceTextSetFont"></A>
<H1 class=name>SpaceTextSetFont</H1>
<A class=type>real</A><A> = </A><A class=function>SpaceTextSetFont</A><A>( text,font as </A><A class=type>real</A><A> );</A>
<BR><A>Задает шрифт объемного текста.</A>
<BR><A>font - id текста</A>
<BR><A>font - id шрифта.</A>
<HR>

<A name="SpaceTextSetText"></A>
<H1 class=name>SpaceTextSetText</H1>
<A class=type>real</A><A> = </A><A class=function>SpaceTextSetText</A><A>( text as </A><A class=type>real</A>
<A>, string as </A><A class=type>string</A><A> );</A>
<BR><A>Задает текстовую строку для отображения объемным текстом.</A>
<BR><A>text - id текстового объекта</A>
<BR><A>string - текстовая строка.</A>
<HR>

<!--
<A name="TextSetColor"></A>
<H1 class=name>TextSetColor</H1>
<A class=type>real</A><A> = </A><A class=function>TextSetColor</A><A>( text,color,alpha as </A><A class=type>real</A><A> );</A>
<BR><A>Задает цвет и прозрачность для экранного или плоского текста.</A>
<BR><A>text - id текстового объекта</A>
<BR><A>color - цвет</A>
<BR><A>alpha - прозрачность.</A>
<HR>

<A name="TextSetFont"></A>
<H1 class=name>TextSetFont</H1>
<A class=type>real</A><A> = </A><A class=function>TextSetFont</A><A>( text,font as </A><A class=type>real</A><A> );</A>
<BR><A>Задает шрифт для экранного или плоского текста.</A>
<BR><A>text - id текстового объекта</A>
<BR><A>font - id шрифта.</A>
<HR>

<A name="TextSetText"></A>
<H1 class=name>TextSetText</H1>
<A class=type>real</A><A> = </A><A class=function>TextSetText</A><A>( text as </A><A class=type>real</A>
<A>, string as </A><A class=type>string</A><A> );</A>
<BR><A>Задает текстовую строку для отображения текстовым объектом любого типа.</A>
<BR><A>text - id текстового объекта</A>
<BR><A>string - текстовая строка.</A>
<HR>
-->

</DIV>

</BODY>
</HTML>

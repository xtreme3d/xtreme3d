<!DOCTYPE html>
<html lang="ru">
<head>
    <title>FAQ</title>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
    <meta charset="windows-1251">
    <meta name="author" content="Gecko">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="sakura.css" inline>
</head>
<body>

<h1>Часто задаваемые вопросы (FAQ)</h1>

<ul>
<li><a href="#q1">Актуально ли сегодня использование Xtreme3D?</a></li>
<li><a href="#q2">Какой движок лучше - Xtreme3D, Ultimate3D или GMOgre?</a></li>
<li><a href="#q3">Почему движок не запускается или работает слишком медленно?</a></li>
<li><a href="#q4">Почему движок вылетает с ошибкой?</a></li>
<li><a href="#q5">Поддерживает ли Xtreme3D шейдеры?</a></li>
<li><a href="#q6">Поддерживает ли Xtreme3D динамические тени?</a></li>
<li><a href="#q7">Как повысить производительность игр на Xtreme3D?</a></li>
<li><a href="#q8">Почему модели в игре неправильно повернуты?</a></li>
<li><a href="#q9">Почему при загрузке моделей не загружаются текстуры?</a></li>
<li><a href="#q10">Что такое Манекены (Dummycubes) и для чего они нужны?</a></li>
<li><a href="#q11">Почему в Xtreme3D не работают события мыши?</a></li>
<li><a href="#q12">Как растянуть окно игры на весь экран в Game Maker 8? Опция Start in full-screen mode не работает!</a></li>
<li><a href="#q13">Как сделать проверку столкновений?</a></li>
<li><a href="#q14">Как получить реалистичную перспективу камеры?</a></li>
<li><a href="#q15">Как получить имена материалов, которые загружаются автоматически вместе с моделью?</a></li>
<li><a href="#q16">Почему ландшафт (Terrain) выглядит ступенчатым?</a></li>
<li><a href="#q17">Как указать переход на следующую строку в объектах текста?</a></li>
<li><a href="#q18">Как вывести кириллицу в объектах текста?</a></li>
<li><a href="#q19">Поддерживает ли Xtreme3D воспроизведение видео?</a></li>
<li><a href="#q20">Почему к телам ODE не прикладываются силы?</a></li>
<li><a href="#q21">Поддерживает ли ODE "тряпичные куклы" (ragdoll)?</a></li>
<li><a href="#q22">Почему материал не учитывает альфа-канал текстуры?</a></li>
<li><a href="#q23">В каких средах можно использовать Xtreme3D? Есть ли поддержка GameMaker Studio?</a></li>
<li><a href="#q24">Почему при использовании Xtreme3D окно игры мерцает?</a></li>
<li><a href="#q25">Как настроить Xtreme3D под GameMaker Studio 2?</a></li>
<li><a href="#q26">Почему не работает BumpShader? Объект закрашивается черным / не видны текстуры / шейдер отображается неправильно.</a></li>
</ul>

<hr>

<h2 id="q1">1. Актуально ли сегодня использование Xtreme3D?</h2>
<p>Для серьезного использования в индустрии (создания крупных коммерческих игровых проектов) - скорее нет, чем да. Xtreme3D основан на устаревших графических технологиях (OpenGL 1.x/2.x) и, конечно, не может конкурировать по уровню графики с современными движками типа Unity и Unreal Engine. Тем не менее, любительские игровые проекты, как правило, и не пытаются сравниться с AAA-тайтлами, поэтому для создания простых инди-игр Xtreme3D 4.x вполне подойдет. Движок по-своему интересный и привлекательный - теоретически, с его помощью можно создать игру не хуже, чем Doom 3 или Half-Life 2. Xtreme3D хорошо подходит для создания игр, работающих на устаревшем или слабом железе, в то время как мейнстримные движки имеют довольно высокие системные требования.</p>
<p>Но если вам нужен кроссплатформенный движок (сборка под мобильные платформы, Linux, macOS и др.), то Xtreme3D не подойдет, так как поддерживает только Windows.</p>

<hr>

<h2 id="q2">2. Какой движок лучше - Xtreme3D, Ultimate3D или GMOgre?</h2>
<p>Все зависит от требований относительно простоты изучения, гибкости и удобства. Ultimate3D очень прост в изучении, но технологически сильно уступает остальным. GMOgre - достаточно сложный движок с очень своеобразным API, но очень мощный, с его помощью можно сделать если не все, то очень многое. Xtreme3D в последних версиях (3.0 и выше) по функциональности приближается к GMOgre и сейчас умеет почти все, что и он - при этом у Xtreme3D более простая архитектура, доставшаяся в наследство от GLScene, и интуитивный API.</p>
<p>Если вы только начинаете изучать 3D-графику, рекомендуем Ultimate3D. Если вы уже обладаете достаточным опытом во встроенной 3D-графике GM, если вас не пугают сложности и отсутствие документации - можно взглянуть в сторону GMOgre. Если вам просто нужен легковесный, но в то же время мощный и хорошо документированный 3D-движок, который легко изучить и удобно использовать - то берите Xtreme3D.</p>
<p>Имейте также в виду, что из всей классической троицы только Xtreme3D продолжает развиваться и поддерживает 64-битную архитектуру, что позволяет использовать его с GameMaker: Studio 2. Ultimate3D и GMOgre давно заброшены авторами и доступны только в виде 32-битных библиотек, что затрудняет их использование со многими современными языками программирования.</p>

<hr>

<h2 id="q3">3. Почему движок не запускается или работает слишком медленно?</h2>
<p>Свежие версии Xtreme3D (3.x-4.x) полностью работоспособны на современных Windows. Отдельные проблемы могут быть связаны с видеодрайвером. Xtreme3D требует драйвер с поддержкой OpenGL 1.3 (плюс несколько расширений для работы отдельных функций) - если Xtreme3D не запускается или работает медленно, рекомендуем обновить видеодрайвер.</p>

<hr>

<h2 id="q4">4. Почему движок вылетает с ошибкой?</h2>
<p>Чаще всего сообщение о неизвестной ошибке ("Unexpected error occurred when running the game") возникает из-за передачи в функции Xtreme3D неправильных параметров. Например, движок не проверяет указатели на валидность, поскольку такую проверку невозможно сделать эффективной. Движок предполагает, что вы не будете передавать ему недействительные указатели.</p>
<p>Также ошибка возникает, если попытаться загрузить несуществующую текстуру или модель. Если ваша модель содержит данные о текстурах, убедитесь, что движок может найти их - задайте папку с текстурами с помощью <code>MaterialLibrarySetTexturePaths</code>.</p>
<p>Наконец, ошибка может возникнуть, если попытаться удалить объект, имеющий потомков. Всегда преварительно отсоединяйте потомков или удаляйте их при помощи <code>ObjectDestroyChildren</code>.</p>

<hr>

<h2 id="q5">5. Поддерживает ли Xtreme3D шейдеры?</h2>
<p>Да, в Xtreme3D 3.x-4.x реализована полноценная поддержка шейдеров на языке GLSL 1.1 и 1.2. Также в движке есть много встроенных шейдеров, реализующих те или иные популярные эффекты.</p>

<hr>

<h2 id="q6">6. Поддерживает ли Xtreme3D динамические тени?</h2>
<p>Да, в Xtreme3D 3.x-4.x есть поддержка трех видов теней (shadow plane, shadow volume, shadow map). Мы рекомендуем использовать теневые карты (объект ShadowMap), как наиболее современные и эффективные.</p>

<hr>

<h2 id="q7">7. Как повысить производительность игр на Xtreme3D?</h2>
<p>Это зависит от механики игры, но существует несколько распространенных способов:</p>
<ul>
<li>Используйте менее детализированные модели и текстуры меньшего разрешения;</li>
<li>Разделите все игровое пространство на части и отключайте отдельные части по мере надобности;</li>
<li>Отключайте или удаляйте ненужные/невидимые в данный момент объекты;</li>
<li>Уменьшите разрешение ресурсоемких эффектов (вода, размытие и т.д.);</li>
<li>Вместо загрузки одной и той же модели несколько раз, используйте дублирование. Это существенно сэкономит память. Также в Xtreme3D 3.x-4.x можно использовать прокси (ProxyObject), которые позволяют создать сколь угодно много копий модели, не дублируя ее в памяти;</li>
<li>Не создавайте новые объекты в цикле (событии Step) для таких вещей, как, например, снаряды, пули, лазеры, спрайты для взрывов и эффектов частиц. Создание и удаление объекта - медленные операции. Используйте массивы заранее созданных объектов, а затем включайте/отключайте их по пере необходимости;</li>
<li>Большие количества однотипных объектов (например, призов) заносите в Octree или Quadtree, а затем используйте <code>PartitionQueryFrustrum</code> для отсеивания невидимых объектов и <code>PartitionQueryBSphere</code> или <code>PartitionQueryAABB</code> для оптимизации проверки столкновений с этими объектами;</li>
<li>В Xtreme3D 3.x-4.x можно реализовать LOD (level of detail) при помощи мультипрокси (MultiProxyObject). Вблизи от камеры мультипрокси будет рендерить высопоколигональную модель, а вдалеке - низкополигональную;</li>
<li>В Xtreme3D 3.x-4.x можно использовать объект ClipPlane для отсечения графики произвольными плоскостями. Например, вы можете разделить уровень на подземелье и верхний мир - когда игрок находится в подземелье, верхний мир отсекается плоскостью, и наоборот.</li>
</ul>

<hr>

<h2 id="q8">8. Почему модели в игре неправильно повернуты?</h2>
<p>Причина кроется в различиях между координатными системами. Xtreme3D использует координатную систему, где ось Z указывает вперед относительно экрана (Z-forward), а ось Y - вверх (Y-up). Вы легко можете исправить положение,</p>
<p>а) переориентировав модель в 3D-редакторе, так, чтобы при загрузке в Xtreme3D она была повернута правильно;</p>
<p>б) сделав модель дочерней для даммикуба (Dummycube) и повернув модель при помощи <code>ObjectRotate</code> (в этом случае для всех остальных действий вместо модели используется даммикуб;</p>
<p>в) повернув модель при помощи <code>FreeformMeshRotate</code> (только для моделей типа Freeform).</p>

<hr>

<h2 id="q9">9. Почему при загрузке моделей не загружаются текстуры?</h2>
<p>Библиотеки материалов Xtreme3D по умолчанию загружают все текстуры из рабочей директории игры. Если модель находится в какой-либо папке (например, data/models), то вы должны указать ее как путь к текстурам при помощи <code>MaterialLibrarySetTexturePaths</code>. Если одновременно загружаются модели из разных папок, следует создать несколько библиотек материалов и при загрузке переключаться между ними при помощи <code>MaterialLibraryActivate</code>. Для каждой из них необходимо указать путь к текстурам соответствующей модели. В Xtreme3D 3.x библиотеки указываются индивидуально при создании модели, поэтому переключаться при помощи <code>MaterialLibraryActivate</code> необязательно.
</A>

<hr>

<h2 id="q10">10. Что такое даммикубы (Dummycube) и для чего они нужны?</h2>
<p>Даммикубы - очень важный тип объектов. Они невидимы и используются для создания иерархических структур. Сделав даммикуб родительским для одного или нескольких объектов, Вы можете управлять ими всеми сразу, управляя даммикубом Например, если отключить даммикуб то все его дочерние объекты также будут отключены. Это очень удобно для представления группы объектов одного типа. Второе главное назначение даммикубов - создание так называемых шарнирных структур (pivot), когда вторичные состояния объекта находятся в зависимости от первичных. Если, скажем, неободимо получить или задать поворот объекта независимо от вектора направления, то проще будет сделать объект дочерним для даммикуба и для работы с направлением использовать даммикуб а для поворота - объект. Подобная структура используется также в скелетной анимации.</p>

<hr>

<h2 id="q11">11. Почему в Xtreme3D не работают события мыши?</h2>
<p>Нажатия кнопок мыши следует проверять только функцией <code>keyboard_check_direct(mb_left)</code> или <code>keyboard_check_direct(mb_right)</code>. В Game Maker 8 можно также использовать функцию <code>mouse_check_button_pressed</code>.</p>

<hr>

<h2 id="q12">12. Как растянуть окно игры на весь экран в Game Maker 8? Опция Start in full-screen mode не работает!</h2>
<p>В Global Game Settings на вкладке Resolution поставьте галочку Set the resolution of the screen. В списке Resolution выберите нужное Вам разрешение (обычно то, которое было указано в функции <code>ViewerCreate</code>). На вкладке Graphics все же выберите Start in full-screen mode, так как без полноэкранного режима будут видны границы окна.<p>

<hr>

<h2 id="q13">13. Как сделать проверку столкновений?</h2>
<p>В Xtreme3D есть несколько способов для этого.</p>
<ul>
<li>Функции ObjectCheck... (<code>ObjectCheckCubeVsCube</code>, <code>ObjectCheckSphereVsFace</code> и др.). Они определяют факт столкновения между двумя объектами (а точнее, их ограничивающими кубами или сферами). Такая проверка может быть полезна для проверки типа снаряд/цель, игрок/приз и т.д.</li>
<li>Для стрельбы в шутерах (а также для реализации взаимодействия игрока с интерактивными предметами и триггерами) можно использовать трассировку лучей (raycasting). Заданный объект испускает луч, и другие объекты проверяются на пересечение с этим лучом. При этом можно получить координаты точки и нормаль полигона пересечения.</li>
<li>Для кинематики (чтобы персонаж передвигался по карте и не проходил сквозь стены) существуют специальные движки проверки столкновений - DCE и FpsManager.</li>
</ul>
<p>Вы также можете подключить любую внешнюю библиотеку с реализацией проверки столкновений.</p>

<hr>

<h2 id="q14">14. Как получить реалистичную перспективу камеры?</h2>
<p>Иногда для достижения реалистичной перспективы требуется коррекция "оптических" характеристик игровой камеры. Следующий пример такой коррекции сводит перспективные искажения к минимуму:</p>
<pre><code>CameraSetFocal(camera, 120);
CameraSetSceneScale(camera, 0.5);
</code></pre>

<hr>

<h2 id="q15">15. Как получить имена материалов, которые загружаются автоматически вместе с моделью?</h2>
<p>Материалы загружаются в текущую активную библиотеку под теми именами, которые были заданы в 3D-редакторе. Вы можете использовать эти имена для того, чтобы изменять параметры материалов модели.</p>

<hr>

<h2 id="q16">16. Почему ландшафт (Terrain) выглядит ступенчатым?</h2>
<p>Если при создании ландшафта он выглядит ступенчатым, значит исходная карта высот закодирована в 24 бита на пиксель, а не 8, как это должно быть. Изображение нужно преобразовать в черно-белое (256 цв.). Например, в GIMP это делается так: Изображение -> Режим -> Градации серого.</p>

<hr>

<h2 id="q17">17. Как указать переход на следующую строку в объектах текста?</h2>
<p>В объектах текста Xtreme3D символ '#' НЕ означает переход на следующую строку. Для этого используется тринадцатый символ ASCII (возврат каретки) - <code>chr(13)</code>, например:</p>
<pre><code>TextSetText(text, "Line1" + chr(13) + "Line2");
</code></pre>

<hr>

<h2 id="q18">18. Как вывести кириллицу в объектах текста?</h2>
<p>Используйте шрифт TTFont и передавайте объектам текста строки в кодировке UTF-8.</p>

<hr>

<h2 id="q19">19. Поддерживает ли Xtreme3D воспроизведение видео?</h2>
<p>Нет. Для воспроизведения видеороликов придется использовать специализированные DLL.</p>

<hr>

<h2 id="q20">20. Почему к телам ODE не прикладываются силы?</h2>
<p>Дело в том, что в Xtreme3D 2.0.2.0 появилась возможность автовыключения тел, если они бездействуют определенное время, а к выключенным телам невозможно применить силы. Автовыключение по умолчанию активировано, его нужно просто выключить:</p>
<pre><code>OdeWorldSetAutoDisableFlag(false);
</code></pre>

<hr>

<h2 id="q21">21. Поддерживает ли ODE "тряпичные куклы" (ragdoll)?</h2>
<p>Да, ODE в Xtreme3D 3.1 поддерживает Ragdoll для Актеров (Actor).</p>

<hr>

<h2 id="q22">22. Почему материал не учитывает альфа-канал текстуры?</h2>
<p>Нужно выставить режим смешивания <code>bmTransparency</code> функцией <code>MaterialSetBlendingMode</code>.</p>

<hr>

<h2 id="q23">23. В каких средах можно использовать Xtreme3D? Есть ли поддержка GameMaker Studio?</h2>
<p>Xtreme3D 3.x изначально создавался под Game Maker 8, но его можно использовать практически в любом языке, поддерживающем вызовы из DLL. Например, есть SDK для Python 2.7, Lua, D и PHP (DevelNext). Начиная с версии 3.9.1 поддерживается GameMaker Studio 2, начиная с 4.0 - 64-битный GameMaker (бывший GameMaker Studio 2) и Python 3.</p>

<hr>

<h2 id="q24">24. Почему при использовании Xtreme3D окно игры мерцает?</h2>
<p>Это происходит, когда две графические системы рисуют изображение в одно и то же окно. Чтобы устранить мерцание, нужно отключить встроенную графику Game Maker. В Game Maker 8 это делается функцией <code>set_automatic_draw(false)</code>, которая отключает автоматическую перерисовку. В <code>GameMaker Studio</code>, к сожалению, нет этой функции, но проблему можно решить другим способом. В событии Create установите счетчик <code>alarm[0] = room_speed</code>. Затем в событии Alarm 0 отключите событие перерисовки при помощи <code>draw_enable_drawevent(false)</code>. Счетчик нужен для того, чтобы функция вызывалась после отрисовки первого кадра, иначе не появится окно игры.</p>
<p>При использовании окна, созданного функцией WindowCreate, эта проблема не проявляется. Если вы не используете Game Maker, и ваша платформа позволяет создавать приложения без стандартного окна, то мы рекомендуем создавать окно для Xtreme3D при помощи WindowCreate, либо можно воспользоваться SDL или другими подобными библиотеками.</p>

<hr>

<h2 id="q25">25. Как настроить Xtreme3D под GameMaker (GameMaker Studio 2)?</h2>
<p>Создайте новый проект GameMaker Language (Drag and Drop проекты не поддерживаются). Скопируйте библиотеки xtreme3d.dll, ode64s.dll, SDL2.dll, SDL2_ttf.dll в папку с файлами данных проекта (datafiles). Текстуры и модели следует хранить в этой же папке. При сборке все файлы оттуда будут скопированы в рабочую директорию игры.</p>
<p>Перенесите в проект скрипт xtreme3d.gml из примера SDK. Создайте новый объект, например, под названием o_engine, и отключите в нем отрисовку встроенной графики Game Maker, как указано в вопросе 23 (это нужно, чтобы устранить проблему с мерцанием экрана). Добавьте образец объекта o_engine в комнату.</p>
<p>Инициализируйте библиотеку, как обычно, вызовом <code>dll_init("xtreme3d.dll")</code> в начале события Create. Все, теперь можно создавать объекты Xtreme3D и управлять ими!</p>
<p>Принципы работы с Xtreme3D, названия функций и констант не изменились, так что вы легко можете портировать на GameMaker Studio любой из старых примеров.</p>
<p>Примечание: для передачи дескриптора окна GM в функцию <code>ViewerCreate</code> используйте <code>PointerToReal</code> для конвертации указателя в real: <code>PtrToReal(window_handle())</code>.</p>

<hr>

<h2 id="q26">26. Почему не работает BumpShader? Объект закрашивается черным / не видны текстуры / шейдер отображается неправильно.</h2>
<p>Если вы не выставляли никакие специфические настройки шейдера, то обычно это означает, что вы не задали необходимые настройки материала. Нужно обязательно указать все компоненты цвета материала (MaterialSetAmbientColor, MaterialSetDiffuseColor, MaterialSetSpecularColor) и значение зеркального блеска (MaterialSetShininess), например:</p>
<pre><code>MaterialSetAmbientColor("material", c_black, 1);
MaterialSetDiffuseColor("material", c_white, 1);
MaterialSetSpecularColor("material", c_ltgray, 1);
MaterialSetShininess("material", 32);
</code></pre>
<p>Также, если у вашего объекта нет собственных тангент-векторов (обычно так бывает для Актеров и встроенных примитивов Xtreme3D), то нужно переключиться на автоматическое пространство касательных:</p>
<pre><code>BumpShaderUseAutoTangentSpace(shader, true);
</code></pre>
<p>Убедитесь, что в материале есть, как минимум, диффузная текстура (в слоте 0) и карта нормалей (в слоте 1). Карта нормалей должна быть в пространстве касательных.</p>
<pre><code>MaterialCreate("material", "");
MaterialLoadTextureEx("material", "textures/diffuse.png", 0);
MaterialLoadTextureEx("material", "textures/normal.png", 1);
BumpShaderSetDiffuseTexture(shader, "");
BumpShaderSetNormalTexture(shader, "");
</code></pre>
<p>Наконец, убедитесь, что шейдер использует количество источников света больше нуля (рекомендуется 8, так как это максимальное количество источников света, которые учитываются при рендеринге одного объекта):</p>
<pre><code>BumpShaderSetMaxLights(bump, 8);
</code></pre>

</body>
</html>

<HTML>
<HEAD>
<META http-equiv=Content-Type content="text/html; charset=windows-1251">
<TITLE>2D-графика</TITLE>
<LINK href="../data/style.css" type=text/css rel=stylesheet>
</HEAD>
<BODY>

<DIV ALIGN=justify>

<H1 class=pagetitle>Урок 12<BR>2D-графика</H1>

<A><B>Уровень:</B> средний<A>
<BR><A><B>Версия Xtreme3D:</B> 3.0.x</A>
<BR><A><B>Автор урока:</B> Gecko</A><A class=ntext>
<BR>
<BR>Xtreme3D позволяет рисовать не только трехмерные объекты, но и двумерные - экранный текст и экранные спрайты. Экранный текст отображается поверх отрендеренной картинки и применяется для представления некоей текстовой информации в игре: количество жизней или патронов, различных сообщений, отладочных данных и пр. Экранные спрайты - это просто двумерные картинки, которые можно использовать для отображения элементов интерфейса - прицел, иконки, шкала энергии и т.д. Также с их помощью можно сделать игровое меню с фоном - это более предпочтительно, чем создавать меню через встроенную графику Game Maker, так как в этом случае вы можете рисовать меню поверх 3D-сцены, что выглядит очень стильно.
<BR>
<BR>Объекты текста используют специальные шрифтовые объекты, хранящие изображения текстовых символов - букв, цифр и знаков препинания. Эти изображения можно задать двумя способами: сгенерировать из системных векторных шрифтов Windows или загрузить из файла. Второе более предпочтительно, так как вы можете нарисовать в графическом редакторе шрифт любого цвета и сложности, с любыми символами и на любом языке, в то время как поддержка системных шрифтов сильно ограничена (поддерживается только латиница). Но у векторных шрифтов есть одно неоспоримое преимущество - масштабируемость без потери качества: то есть, можно из одного и того же системного шрифта сгенерировать символы разного размера. 
<BR>
<BR>Код для создания шрифта и экранного текста выглядит следующим образом:
<BR>
<BR><A>font = </A><A class=func2link href=../functions/fonttext.htm#WindowsBitmapfontCreate>WindowsBitmapfontCreate</A><A>('Arial', 14, 32, 95);</A>
<BR><A>text = </A><A class=func2link href=../functions/fonttext.htm#HUDTextCreate>HUDTextCreate</A><A>(font, 'Hello, World!', <B>global</B>.front);</A>
<BR>
<BR>Обратите внимание, что мы указываем корневой объект <B>global</B>.front в качестве родителя объекту text - это гарантирует, что текст будет отрисован после трехмерной сцены.
<BR>
<BR>Созданный текст можно видоизменять - задать ему цвет и прозрачность, а также позицию и поворот:
<BR>
<BR><A class=func2link href=../functions/fonttext.htm#HUDTextSetColor>HUDTextSetColor</A><A>(text, </A><A class=constant>c_red</A><A>, 0.5);</A>
<BR><A class=func2link href=../functions/object.htm#ObjectSetPosition>ObjectSetPosition</A><A>(text, 100, 100, 0);</A>
<BR><A class=func2link href=../functions/fonttext.htm#HUDTextSetRotation>HUDTextSetRotation</A><A>(text, 30.0);</A>
<BR>
<BR>У шрифтов типа WindowsBitmapfont есть серьезный недостаток: он поддерживает только кодировку ANSI. Это означает, что в одном приложении нельзя использовать символы нескольких разных алфавитов. Для решения этой проблемы в Xtreme3D была добавлена поддержка библиотеки FreeType и кодировки UTF-8, которая позволяет выводить любые символы без ограничений. При помощи FreeType вы можете загружать TTF-шрифты из файлов, что очень удобно - вам не придется волноваться по поводу того, установлен ли нужный шрифт в системе пользователя: все нужные шрифты могут поставляться вместе с игрой.
<BR>
<BR>Создание шрифта и экранного текста при помощи FreeType выглядит следующим образом:
<BR>
<BR><A>font = </A><A class=func2link href=../functions/fonttext.htm#TTFontCreate>TTFontCreate</A><A>('data/font.ttf', 14);</A>
<BR><A>text = </A><A class=func2link href=../functions/fonttext.htm#HUDTextCreate>HUDTextCreate</A><A>(font, 'Hello, World!', <B>global</B>.front);</A>
<BR>
<BR>Текстовая строка, которую вы передаете в функцию 
<A class=func2link href=../functions/fonttext.htm#HUDTextCreate>HUDTextCreate</A>, 
должна быть закодирована в UTF-8. К сожалению, Game Maker 8 не поддерживает UTF-8 во встроенном редакторе кода, поэтому текст, содержащий символы национальных алфавитов, следует либо загружать из файла функцией 
<A class=func2link href=../functions/text.htm#TextRead>TextRead</A>, либо конвертировать функцией 
<A class=func2link href=../functions/text.htm#TextConvertANSIToUTF8>TextConvertANSIToUTF8</A>. 
<BR>Для использования функции 
<A class=func2link href=../functions/fonttext.htm#TTFontCreate>TTFontCreate</A>
поместите в папку с игрой библиотеку freetype.dll (ищите ее в SDK).
</A>

</DIV>

</BODY>
</HTML>

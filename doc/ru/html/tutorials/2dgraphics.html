<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Tutorial 12. 2D graphics</title>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
    <meta charset="windows-1251">
    <meta name="author" content="Gecko">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="../sakura.css" inline>
    <link rel="stylesheet" type="text/css" href="../github.css" inline>
</head>
<body>
<h1 id="122d">Урок 12. 2D-графика</h1>
<p>Xtreme3D позволяет рисовать не только трехмерные объекты, но и двумерные - экранный текст и экранные спрайты. Экранный текст отображается поверх отрендеренной картинки и применяется для представления некоей текстовой информации в игре: количество жизней или патронов, различных сообщений, отладочных данных и пр. Экранные спрайты - это просто двумерные картинки, которые можно использовать для отображения элементов интерфейса - прицел, иконки, шкала энергии и т.д. Также с их помощью можно сделать игровое меню с фоном - это более предпочтительно, чем создавать меню через встроенную графику GameMaker, так как в этом случае вы можете рисовать меню поверх 3D-сцены, что выглядит очень стильно.</p>
<p>Объекты текста используют специальные шрифтовые объекты, хранящие изображения текстовых символов - букв, цифр и знаков препинания. Эти изображения можно задать двумя способами: сгенерировать из системных векторных шрифтов Windows или загрузить из файла. Второе более предпочтительно, так как вы можете нарисовать в графическом редакторе шрифт любого цвета и сложности, с любыми символами и на любом языке, в то время как поддержка системных шрифтов сильно ограничена (поддерживается только латиница). Но у векторных шрифтов есть одно неоспоримое преимущество - масштабируемость без потери качества: то есть, можно из одного и того же системного шрифта сгенерировать символы разного размера.</p>
<p>Код для создания шрифта и экранного текста выглядит следующим образом:</p>
<pre class="gml language-gml"><code class="hljs gml language-gml">font = WindowsBitmapfontCreate(<span class="hljs-string">&quot;Arial&quot;</span>, <span class="hljs-number">14</span>, <span class="hljs-number">32</span>, <span class="hljs-number">95</span>);
text = HUDTextCreate(font, <span class="hljs-string">&quot;Hello, World!&quot;</span>, <span class="hljs-symbol">global</span>.front);
</code></pre>
<p>Обратите внимание, что мы указываем корневой объект <code>global.front</code> в качестве родителя объекту text - это гарантирует, что текст будет отрисован после трехмерной сцены.</p>
<p>Созданный текст можно видоизменять - задать ему цвет и прозрачность, а также позицию и поворот:</p>
<pre class="gml language-gml"><code class="hljs gml language-gml">HUDTextSetColor(text, <span class="hljs-symbol">c_red</span>, <span class="hljs-number">0.5</span>);
ObjectSetPosition(text, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>);
HUDTextSetRotation(text, <span class="hljs-number">30.0</span>);
</code></pre>
<p>У шрифтов типа WindowsBitmapfont есть серьезный недостаток: он поддерживает только кодировку ANSI. Для решения этой проблемы в Xtreme3D была добавлена поддержка библиотеки FreeType и кодировки UTF-8, которая позволяет выводить любые символы без ограничений. При помощи FreeType вы можете загружать TTF-шрифты из файлов, что очень удобно - вам не придется волноваться по поводу того, установлен ли нужный шрифт в системе пользователя: все нужные шрифты могут поставляться вместе с игрой.</p>
<p>Создание шрифта и экранного текста при помощи FreeType выглядит следующим образом:</p>
<pre class="gml language-gml"><code class="hljs gml language-gml">font = TTFontCreate(<span class="hljs-string">&quot;data/font.ttf&quot;</span>, <span class="hljs-number">14</span>);
text = HUDTextCreate(font, <span class="hljs-string">&quot;Hello, World!&quot;</span>, <span class="hljs-symbol">global</span>.front);
</code></pre>
<p>Текстовая строка, которую вы передаете в функцию <code>HUDTextCreate</code>, должна быть закодирована в UTF-8.</p>
</body>
</html>

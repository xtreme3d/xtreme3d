<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Tutorial 17. Particles</title>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
    <meta charset="windows-1251">
    <meta name="author" content="Gecko">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="../sakura.css" inline>
    <link rel="stylesheet" type="text/css" href="../github.css" inline>
</head>
<body>
<h1 id="17">Урок 17. Системы частиц</h1>
<p>Частицы (particles) - это маленькие, простые по форме движущиеся объекты, множеством которых моделируются различные сложные динамические субстанции, например, огонь, дым, фейерверк и т.д. В качестве частиц в игровых движках обычно используются биллборды - направленные в сторону камеры прямоугольники с текстурой. В Xtreme3D есть две разные системы частиц - FireFX и ThorFX. FireFX - система частиц, моделирующая огонь (хотя с ее помощью можно воссоздавать и различные другие эффекты). ThorFX предназначена для моделирования молний и разного рода электрических разрядов.</p>
<p>В играх обычно используется много однотипных систем частиц. К примеру, в подземелье на стенах могут висеть факелы, и на каждом будет гореть огонь, сделанный при помощи частиц. В данном случае проще будет не создавать отдельную систему для каждого факела, а просто нарисовать одну и ту же систему несколько раз в разных позициях. Специально для такой ситуации предусмотрен менеджер FireFX. Менеджер - это что-то вроде "сервера", на котором выполняются все вычисления, связанные с эффектом. А отдельные системы FireFX - это "клиенты", использующие настройки указанного для них менеджера. Вы просто создаете менеджер, настраиваете его как вам угодно, а затем добавляете любое количество систем в любых нужных вам местах сцены. Изменения, внесенные в настройки менеджера, автоматически коснутся всех подчиненных ему систем.</p>
<p>Сначала создаем менеджер FireFX:</p>
<pre class="gml language-gml"><code class="hljs gml language-gml">firefx = FireFXManagerCreate();
FireFXSetParticleSize(firefx, <span class="hljs-number">0.3</span>);
FireFXSetRadius(firefx, <span class="hljs-number">0.1</span>);
FireFXSetBurst(firefx, <span class="hljs-number">2.0</span>);
FireFXSetDensity(firefx, <span class="hljs-number">1</span>);
FireFXSetLife(firefx, <span class="hljs-number">1</span>);
FireFXSetColor(firefx, <span class="hljs-symbol">c_yellow</span>, <span class="hljs-number">1.0</span>, <span class="hljs-symbol">c_red</span>, <span class="hljs-number">0.0</span>);
</code></pre>
<p>Теперь добавляем эффект огня любым объектам в любом количестве:</p>
<pre class="gml language-gml"><code class="hljs gml language-gml">fireobj1 = DummycubeCreate(<span class="hljs-symbol">global</span>.scene1);
ObjectSetPosition(fireobj1, <span class="hljs-number">-2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
FireFXCreate(firefx, fireobj1);

fireobj2 = DummycubeCreate(<span class="hljs-symbol">global</span>.scene1);
ObjectSetPosition(fireobj2, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
FireFXCreate(firefx, fireobj2);
</code></pre>
</body>
</html>

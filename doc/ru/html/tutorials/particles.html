<HTML>
<HEAD>
<META http-equiv=Content-Type content="text/html; charset=windows-1251">
<TITLE>Системы частиц</TITLE>
<LINK href="../data/style.css" type=text/css rel=stylesheet>
</HEAD>
<BODY>

<DIV ALIGN=justify>

<H1 class=pagetitle>Урок 17<BR>Системы частиц</H1>

<A><B>Уровень:</B> средний<A>
<BR><A><B>Версия Xtreme3D:</B> 3.0.x</A>
<BR><A><B>Автор урока:</B> Gecko</A><A class=ntext>
<BR>
<BR>Частицы (particles) - это маленькие, простые по форме движущиеся объекты, множеством которых моделируются различные сложные динамические субстанции, например, огонь, дым, фейерверк и т.д. В качестве частиц в игровых движках обычно используются биллборды - направленные в сторону камеры прямоугольники с текстурой. В Xtreme3D есть две разные системы частиц - FireFX и ThorFX. FireFX - система частиц, моделирующая огонь (хотя с ее помощью можно воссоздавать и различные другие эффекты). ThorFX предназначена для моделирования молний и разного рода электрических разрядов.
<BR>
<BR>В играх обычно используется много однотипных систем частиц. К примеру, в подземелье на стенах могут висеть факелы, и на каждом будет гореть огонь, сделанный при помощи частиц. В данном случае проще будет не создавать отдельную систему для каждого факела, а просто нарисовать одну и ту же систему несколько раз в разных позициях. Специально для такой ситуации предусмотрен менеджер FireFX. Менеджер - это что-то вроде "сервера", на котором выполняются все вычисления, связанные с эффектом. А отдельные системы FireFX - это "клиенты", использующие настройки указанного для них менеджера. Вы просто создаете менеджер, настраиваете его как вам угодно, а затем добавляете любое количество систем в любых нужных вам местах сцены. Изменения, внесенные в настройки менеджера, автоматически коснутся всех подчиненных ему систем. 
<BR>
<BR>Сначала создаем менеджер FireFX:
<BR>
<BR><A>firefx = </A><A class=func2link href=../functions/firefx.htm#FireFXManagerCreate>FireFXManagerCreate</A><A>();</A>
<BR><A class=func2link href=../functions/firefx.htm#FireFXSetParticleSize>FireFXSetParticleSize</A><A>(firefx, 0.3);</A>
<BR><A class=func2link href=../functions/firefx.htm#FireFXSetRadius>FireFXSetRadius</A><A>(firefx, 0.1);</A>
<BR><A class=func2link href=../functions/firefx.htm#FireFXSetBurst>FireFXSetBurst</A><A>(firefx, 2.0);</A>
<BR><A class=func2link href=../functions/firefx.htm#FireFXSetDensity>FireFXSetDensity</A><A>(firefx, 1);</A>
<BR><A class=func2link href=../functions/firefx.htm#FireFXSetLife>FireFXSetLife</A><A>(firefx, 1);</A>
<BR><A class=func2link href=../functions/firefx.htm#FireFXSetColor>FireFXSetColor</A><A>(firefx, </A><A class=constant>c_yellow</A><A>, 1.0, </A>
<A class=constant>c_red</A><A>, 0.0);</A>
<BR>
<BR>Теперь добавляем эффект огня любым объектам в любом количестве:
<BR>
<BR><A>fireobj1 = </A><A class=func2link href=../functions/dummycube.htm#DummycubeCreate>DummycubeCreate</A><A>(<B>global</B>.scene1);</A>
<BR><A class=func2link href=../functions/object.htm#ObjectSetPosition>ObjectSetPosition</A><A>(fireobj1, -2, 0, 0);</A>
<BR><A class=func2link href=../functions/firefx.htm#FireFXCreate>FireFXCreate</A><A>(firefx, fireobj1);</A>
<BR>
<BR><A>fireobj2 = </A><A class=func2link href=../functions/dummycube.htm#DummycubeCreate>DummycubeCreate</A><A>(<B>global</B>.scene1);</A>
<BR><A class=func2link href=../functions/object.htm#ObjectSetPosition>ObjectSetPosition</A><A>(fireobj2, 2, 0, 0);</A>
<BR><A class=func2link href=../functions/firefx.htm#FireFXCreate>FireFXCreate</A><A>(firefx, fireobj2);</A>
<BR>
</DIV>

</BODY>
</HTML>
